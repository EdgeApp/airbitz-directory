var app=angular.module("searchStarter",["ui.router","ngAnimate"]);app.config(function(t,e,o){o.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.otherwise("/"),t.state("home",{url:"/",templateUrl:"../partials/region-list.html",controller:"abRegionList",resolve:{regionData:function(t){return t.get("/mgmt/api/biz/countries").then(function(t){var e=t.data.results;return e})}}}).state("region",{url:"/region/:region",templateUrl:"../partials/region.html",controller:"abRegionDetails",resolve:{region:function(t,e){return t.get("/mgmt/api/biz/country/"+e.region).then(function(t){return t.data.results})}}})}),app.controller("abRegionList",["$scope","$http","SimpleCache","regionData",function(t,e,o,r){t.regionData=r,t.bizCount=function(){for(var t=0,e=0;e<r.length;e++)t+=r[e].biz_count;return t},t.regionLookup=function(t){return"US"===t?"United States":void 0},t.regionClicked=function(t){var e=$("#input-location"),r=$("#search-button");e.val(t),r.addClass("animated flash"),e.css({"border-color":"#2291cf","-webkit-transition":"border 100ms ease-out","-moz-transition":"border 100ms ease-out","-o-transition":"border 100ms ease-out"}),setTimeout(function(){r.removeClass("animated fadeInUp"),e.css({"border-color":"#ccc","-webkit-transition":"border 500ms ease-out","-moz-transition":"border 500ms ease-out","-o-transition":"border 500ms ease-out"})},2e3),o.put("country",t)}}]),app.controller("abRegionDetails",["$scope","SimpleCache","region",function(t,e,o){t.regionDetails=o,t.url_country_code=document.location.href.split("/")[document.location.href.split("/").length-1],t.country=e.get("country")||t.url_country_code,$(".searchStarter .loading-spinner").hide(),t.bizCount=function(){for(var t=0,e=0;e<o.length;e++)t+=o[e].biz_count;return t},t.subRegionClicked=function(e,o){var r=$("#input-location"),n=$("#input-name-category"),i=$("#search-button");r.val(e+", "+o),n.val(""),r.css({"border-color":"#2291cf","-webkit-transition":"border 100ms ease-out","-moz-transition":"border 100ms ease-out","-o-transition":"border 100ms ease-out"}),setTimeout(function(){i.removeClass("animated flash"),r.css({"border-color":"#ccc","-webkit-transition":"border 500ms ease-out","-moz-transition":"border 500ms ease-out","-o-transition":"border 500ms ease-out"})},2e3),t.showLoading(),i.click()},t.showLoading=function(){var t=$(".searchStarter .loading-spinner");t.show(),t.addClass("animated fadeInUp"),$(".searchStarter .list-container").css("opacity",".3")}}]),app.service("SimpleCache",["$rootScope",function(){var t={};this.put=function(e,o){t[e]=o},this.remove=function(e){delete t[e]},this.get=function(e){return t[e]||null}}]);