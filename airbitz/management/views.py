from django.contrib import messages
from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.decorators import user_passes_test
from django.core.urlresolvers import reverse
from django.http import Http404
from django.http import HttpResponse
from django.http import HttpResponseRedirect
from django.shortcuts import render
from django.shortcuts import render_to_response, get_object_or_404
from django.template import RequestContext

from directory.models import STATUS_CHOICES, SOCIAL_TYPES, \
                             Category, ImageTag, \
                             Business, BusinessImage, \
                             BusinessHours, SocialId
from directory.views import SPECIALS_TAG
from management.forms import CategoryForm, ImageTagForm, \
                             BusinessForm, BizAddressForm, \
                             BizImageForm, BizImageLinkForm, \
                             BizImportForm, HoursFormSet, HoursFormSetHelper, \
                             SocialFormSet, SocialFormHelper
from urlparse import urlparse
from bs4 import BeautifulSoup

import logging
logger = logging.getLogger(__name__)

LOGIN_URL='/mgmt/login'

def isManager(u): 
    return u.is_superuser

def login_user(request):
    username = password = ''
    if request.POST:
        username = request.POST.get('username')
        password = request.POST.get('password')
        user = authenticate(username=username, password=password)
        if user is not None and user.is_active:
            if isManager(user):
                login(request, user)
                return HttpResponseRedirect(reverse('mgmt_dashboard'))
            else:
                login(request, user)
                return HttpResponseRedirect(reverse('landing'))
        else:
            messages.error(request, 'Authentication failed!')

    return render_to_response('login.html',{
            'username': username
        }, context_instance=RequestContext(request))

def logout_user(request):
    logout(request)
    return HttpResponseRedirect(reverse('landing'))

@user_passes_test(isManager, login_url=LOGIN_URL)
def dashboard(request):
    context = {
        'STATUS_CHOICES': STATUS_CHOICES
    }
    return render_to_response('mgmt_dashboard.html', RequestContext(request, context))

@user_passes_test(isManager, login_url=LOGIN_URL)
def map(request):
    context = {
        'STATUS_CHOICES': STATUS_CHOICES
    }
    return render_to_response('mgmt_map_view.html', RequestContext(request, context))

@user_passes_test(isManager, login_url=LOGIN_URL)
def category_list(request):
    results = Category.objects.all()
    context = {
        'cats': results
    }
    return render_to_response('mgmt_category_list.html', RequestContext(request, context))

@user_passes_test(isManager, login_url=LOGIN_URL)
def image_tag_list(request):
    results = ImageTag.objects.all()
    context = {
        'tags': results
    }
    return render_to_response('mgmt_image_tag_list.html', RequestContext(request, context))

@user_passes_test(isManager, login_url=LOGIN_URL)
def category_edit(request, catId=None):
    return object_edit(request, title='Category Edit',
                       objId=catId, objclass=Category, \
                       objform=CategoryForm, returnUrl='mgmt_category_list')

@user_passes_test(isManager, login_url=LOGIN_URL)
def category_delete(request, catId=None):
    obj = get_object_or_404(Category, pk=catId)
    obj.delete()
    messages.success(request, 'Category deleted')
    return HttpResponseRedirect(reverse('mgmt_category_list'))

@user_passes_test(isManager, login_url=LOGIN_URL)
def image_tag_edit(request, tagId=None):
    return object_edit(request, title='Image Tag Edit',
                       objId=tagId, objclass=ImageTag,
                       objform=ImageTagForm, returnUrl='mgmt_image_tag_list')

@user_passes_test(isManager, login_url=LOGIN_URL)
def image_tag_delete(request, tagId=None):
    obj = get_object_or_404(ImageTag, pk=tagId)
    obj.delete()
    messages.success(request, 'Tag deleted')
    return HttpResponseRedirect(reverse('mgmt_image_tag_list'))

@user_passes_test(isManager, login_url=LOGIN_URL)
def object_edit(request, title=None, objId=None, objclass=None, \
                objform=None, returnUrl=None):
    if objId:
        obj = get_object_or_404(objclass, pk=objId)
    else:
        obj = objclass()
    if request.method == 'POST':
        form = objform(request.POST, instance=obj)
        if form.is_valid():
            form.save()
            messages.success(request, 'Changes Saved')
            return HttpResponseRedirect(reverse(returnUrl))
        else:
            messages.error(request, 'Unable to save record.')
    else:
        form = objform(instance=obj)

    return render(request, 'mgmt_biz_edit.html', {
        'title': title,
        'obj': obj,
        'form': form,
    })

@user_passes_test(isManager, login_url=LOGIN_URL)
def business_import(request):
    if request.method == 'POST':
        form = BizImportForm(request.POST)
        if form.is_valid():
            fsid = form.cleaned_data['id']
            fsurl = form.cleaned_data['url']
            biz = Business.objects.create()
            social = SocialId.objects.create(business=biz,
                                             social_type='foursquare',
                                             social_id=fsid,
                                             social_url=fsurl)
            import foursquare_import as fs
            importer = fs.FoursquareClient()
            importer.update_business(biz, social.social_id)
            messages.success(request, 'Place Imported')
            return HttpResponseRedirect(reverse('mgmt_biz_view', args=(biz.id, )))
        else:
            messages.error(request, 'Unable to save record.')
    else:
        form = BizImportForm()
    return render(request, 'mgmt_biz_edit.html', {
        'form': form,
    })


@user_passes_test(isManager, login_url=LOGIN_URL)
def business_base_edit(request, bizId=None):
    return business_edit(request, bizId=bizId, formclass=BusinessForm) 

@user_passes_test(isManager, login_url=LOGIN_URL)
def business_location_edit(request, bizId=None):
    return business_edit(request, bizId=bizId, formclass=BizAddressForm) 

def business_edit(request, bizId=None, formclass=None):
    if bizId:
        biz = get_object_or_404(Business, pk=bizId)
    else:
        biz = Business()
    if request.method == 'POST':
        form = formclass(request.POST, instance=biz)
        if form.is_valid():
            form.save()
            messages.success(request, 'Changes Saved')
            return HttpResponseRedirect(reverse('mgmt_biz_view', args=(biz.id, )))
        else:
            messages.error(request, 'Unable to save record.')
    else:
        form = formclass(instance=biz)

    return render(request, 'mgmt_biz_edit.html', {
        'title': 'Add/Edit',
        'biz': biz,
        'form': form,
    })

@user_passes_test(isManager, login_url=LOGIN_URL)
def business_copy(request, bizId):
    biz = get_object_or_404(Business, pk=bizId)
    categories = biz.categories.all()
    socials = biz.socialid_set.all()
    hours = biz.businesshours_set.all()
    images = biz.businessimage_set.all()

    biz.pk = None
    biz.save()
    for c in categories:
        biz.categories.add(c)
    for s in socials:
        s.pk = None
        s.business = biz
        s.save()
    for h in hours:
        h.pk = None
        h.business = biz
        h.save()
    for i in images:
        i.duplicate(biz)
    return HttpResponseRedirect(reverse('mgmt_biz_view', args=(biz.id, )))

@user_passes_test(isManager, login_url=LOGIN_URL)
def business_view(request, bizId):
    biz = get_object_or_404(Business, pk=bizId)
    hours = BusinessHours.objects.filter(business=biz)
    social = SocialId.objects.filter(business=biz)

    if biz.published is None:
        published = ''
    else:
        published = biz.published.strftime('%m/%d/%y %H:%M:%S')

    context = {
        'STATUS_CHOICES': STATUS_CHOICES,
        'SOCIAL_TYPES': SOCIAL_TYPES,
        'biz': biz,
        'hours': hours,
        'social': social,
        'tab_main': ' class=active ',
        'created': biz.created.strftime('%m/%d/%y %H:%M:%S'),
        'modified': biz.modified.strftime('%m/%d/%y %H:%M:%S'),
        'published': published,
    }
    logger.debug("this is a debug message!")
    return render_to_response('mgmt_biz_view.html', RequestContext(request, context))

@user_passes_test(isManager, login_url=LOGIN_URL)
def business_image_view(request, bizId):
    biz = get_object_or_404(Business, pk=bizId)
    images = BusinessImage.objects.filter(business=biz)
    context = {
        'biz': biz,
        'images': images,
        'tab_images': ' class=active ',
    }
    return render_to_response('mgmt_biz_image_view.html', RequestContext(request, context))

def business_image_edit(request, bizId, imgId=None):
    formclass = BizImageForm
    biz = get_object_or_404(Business, pk=bizId)
    if imgId:
        img = get_object_or_404(BusinessImage, pk=imgId)
    else:
        img = BusinessImage()
    img.business = biz
    if request.method == 'POST':
        form = formclass(request.POST, request.FILES, instance=img)
        if form.is_valid():
            form.save()
            messages.success(request, 'Changes Saved')
            return HttpResponseRedirect(reverse('mgmt_biz_view', args=(biz.id, )))
        else:
            for field, errors in form.errors.items():
                for error in errors:
                    print field, error
            messages.error(request, 'Unable to save record.')
    else:
        form = formclass(instance=img)

    return render(request, 'mgmt_biz_edit.html', {
        'title': 'Add/Edit',
        'biz': biz,
        'img': img,
        'form': form,
    })
    
@user_passes_test(isManager, login_url=LOGIN_URL)
def business_image_link(request, bizId):
    biz = get_object_or_404(Business, pk=bizId)
    if request.method == 'POST':
        form = BizImageLinkForm(request.POST)
        if form.is_valid():
            try:
                BusinessImage.create_from_url(biz.id, request.POST['url'])
                messages.success(request, 'Image Saved')
                return HttpResponseRedirect(reverse('mgmt_biz_view', args=(biz.id, )))
            except:
                messages.error(request, 'Unable to save record.')
        else:
            messages.error(request, 'Unable to save record.')
    else:
        form = BizImageLinkForm()

    return render(request, 'mgmt_biz_edit.html', {
        'biz': biz,
        'form': form,
        'title': 'Image Link',
    })


@user_passes_test(isManager, login_url=LOGIN_URL)
def set_landing_image(request, bizId, imgId):
    biz = get_object_or_404(Business, pk=bizId)
    img = get_object_or_404(BusinessImage, pk=imgId)
    if request.method == 'POST':
        biz.landing_image = img
        biz.save()
        return HttpResponse('Nice pic')
    else: 
        return HttpResponse('POSTS only boys')

@user_passes_test(isManager, login_url=LOGIN_URL)
def business_hours_edit(request, bizId):
    return generic_biz_edit(request, bizId, 
                      formClass=HoursFormSet,
                      stayView='mgmt_biz_hours_edit',
                      helper=HoursFormSetHelper,
                      title='Edit Hours')

@user_passes_test(isManager, login_url=LOGIN_URL)
def business_social_edit(request, bizId):
    return generic_biz_edit(request, bizId, 
                      formClass=SocialFormSet,
                      stayView='mgmt_biz_social_edit',
                      helper=SocialFormHelper,
                      title='Edit Social')


@user_passes_test(isManager, login_url=LOGIN_URL)
def generic_biz_edit(request, bizId, title, formClass,
                     template='mgmt_biz_edit.html',
                     stayView='mgmt_biz_view',
                     helper=None,
                     returnUrl=None,
                     extras={}):
    biz = get_object_or_404(Business, pk=bizId)
    if helper:
        h = helper()
    else:
        h = None
    if request.method == 'POST':
        form = formClass(request.POST, instance=biz)
        if form.is_valid():
            form.save()
            messages.success(request, 'Changes Saved')
            if returnUrl:
                return HttpResponseRedirect(returnUrl)
            else:
                return HttpResponseRedirect(reverse(stayView, args=(biz.id, )))
        else:
            messages.error(request, 'Unable to save record.')
    else:
        form = formClass(instance=biz)

    context = {
        'title': title,
        'biz': biz,
        'helper': h,
        'form': form,
    }
    return render(request, template, dict(context.items() + extras.items()))

@user_passes_test(isManager, login_url=LOGIN_URL)
def image_delete(request, bizId, imgId):
    if request.method == 'DELETE':
        get_object_or_404(Business, pk=bizId)
        get_object_or_404(BusinessImage, pk=imgId).delete()
        messages.success(request, 'Image deleted')
        return HttpResponseRedirect(reverse('mgmt_biz_image_view', args=(bizId, )))
    else:
        raise Http404

@user_passes_test(isManager, login_url=LOGIN_URL)
def add_special_tag(request, bizId):
    biz = get_object_or_404(Business, pk=bizId)
    (cat, _) = Category.objects.get_or_create(name=SPECIALS_TAG)
    if not biz.categories.filter(id=cat.id).exists():
        biz.categories.add(cat)
        biz.save()
    return HttpResponse('Tag added')

@user_passes_test(isManager, login_url=LOGIN_URL)
def remove_special_tag(request, bizId):
    biz = get_object_or_404(Business, pk=bizId)
    (cat, _) = Category.objects.get_or_create(name=SPECIALS_TAG)
    if biz.categories.filter(id=cat.id).exists():
        biz.categories.remove(cat)
        biz.save()
    return HttpResponse('Tag removed')

# QUICK REDIRECTIONS (PROBABLY SHOULD BE ITS OWN APP EVENTUALLY)
def redirect_vote(request):
    return HttpResponseRedirect('https://docs.google.com/a/airbitz.co/forms/d/1XGPghf1OsdgTmrsiEscWqcPjssfDX3u8IE-PBOLebc4/viewform')

def redirect_blog(request):
    return HttpResponseRedirect('https://airbitz.co/go/')

def redirect_about(request):
    return HttpResponseRedirect('https://airbitz.co/go/about/')

def redirect_button(request):
    try:
        referer = request.META['HTTP_REFERER']
        parsed_referer = urlparse(referer)
        domain = '{uri.netloc}'.format(uri=parsed_referer)
        b_match = Business.objects.filter(website__icontains=domain)
        if b_match:
            biz_id = b_match[0].id
            return HttpResponseRedirect(request.build_absolute_uri(reverse('business_info', args=[biz_id])))
        else:
            redirect_url = request.build_absolute_uri(reverse('landing'))
            return HttpResponseRedirect(redirect_url)
    except KeyError: # couldn't get referrer (googlebot crawl)
        redirect_url = request.build_absolute_uri(reverse('landing'))
        return HttpResponseRedirect(redirect_url)


def page_privacy_policy(request):
    context = {}
    return render_to_response('pages/page_privacy-policy.html', RequestContext(request, context))

############################
# bitcoin card and hiddenbits
############################
def page_card(request):
    context = {
        'page_title': 'Bitcoin Gift Cards by Airbitz',
        'page_description': 'Airbitz wallet gift cards are one of the easiest ways to share and introduce bitcoin to friends and family.',
    }
    return render_to_response('pages/page_card.html', RequestContext(request, context))

def page_hiddenbits(request):
    context = {
        'page_title': '<strong>Hiddenbits</strong> - Social Bitcoin Scavenger Hunt',
        'page_description': 'Hiddenbits bitcoin scavenger hung is a promotion sponsored by Airbitz Bitcoin Wallet.',
    }
    return render_to_response('pages/page_hiddenbits.html', RequestContext(request, context))

############################
# bitcion-wallet documentation
############################

def clean_gdoc_html(html=None, images=True):
    soup = BeautifulSoup(html)
    style = soup.style
    body = soup.body

    # remove the google doc title
    for s in soup.find_all(class_='title'):
        s.extract()

    # fix h1 tags
    for s in soup('h1'):
        if s is not None:
            print "H1:" + str(s)
            s.name = 'h3'

    # remove images
    if images is False:
        [s.extract() for s in soup('img')]

    html = {
        'style': str(style),
        'body': str(body),
    }

    return html




def page_bitcoin_wallet(request):
    context = {
        'page_title': '',
        'page_description': '',
    }
    return render_to_response('pages/page_bitcoin-wallet.html', RequestContext(request, context))

def page_bitcoin_wallet_api_library(request):
    context = {
        'page_title': 'Bitcoin Wallet API Library',
        'page_description': 'The Airbitz Core (ABC) gives developers the ability to build Bitcoin products such as currency exchanges, ATMs, POS solutions, games, and payroll services that are fully integrated with accounts and wallets from the Airbitz mobile app.',
    }
    return render_to_response('pages/page_bitcoin-wallet-api-library.html', RequestContext(request, context))

def page_bitcoin_wallet_client_server_architecture(request):
    context = {
        'page_title': 'Bitcoin Wallet Client Server Architecture',
        'page_description': 'Technical document describing the open source Airbitz core library client server architecture',
    }
    return render_to_response('pages/page_bitcoin-wallet-client-server-architecture.html', RequestContext(request, context))

def page_bitcoin_wallet_core_white_paper(request):
    context = {
        'page_title': 'Bitcoin Wallet Core White Paper',
        'page_description': 'The Airbitz mobile digital wallet implements a decentralized, secure, peer-to-peer synchronized, and backed up bitcoin wallet with a clean, easy to use interface.',
    }
    return render_to_response('pages/page_bitcoin-wallet-core-white-paper.html', RequestContext(request, context))

def page_bitcoin_wallet_data_model(request):
    gdoc_html = '<html><head><title>Airbitz Wallet Data Model</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style>.lst-kix_qnqms01za9pa-8>li:before{content:"\0025a0  "}.lst-kix_tip1ogrrd5h8-0>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-0,decimal) ". "}.lst-kix_qnqms01za9pa-4>li:before{content:"\0025cb  "}.lst-kix_tip1ogrrd5h8-6>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-6,decimal) ". "}ol.lst-kix_g5dgdm1ra0ag-5.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-5 0}.lst-kix_g5dgdm1ra0ag-2>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-2}ul.lst-kix_qnqms01za9pa-2{list-style-type:none}ul.lst-kix_qnqms01za9pa-1{list-style-type:none}ul.lst-kix_qnqms01za9pa-4{list-style-type:none}ul.lst-kix_qnqms01za9pa-3{list-style-type:none}ul.lst-kix_qnqms01za9pa-6{list-style-type:none}.lst-kix_z09cyxkoxhrt-3>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-3,decimal) ". "}ul.lst-kix_qnqms01za9pa-5{list-style-type:none}.lst-kix_tip1ogrrd5h8-5>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-5,lower-roman) ". "}.lst-kix_z09cyxkoxhrt-1>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-1}ul.lst-kix_qnqms01za9pa-8{list-style-type:none}ul.lst-kix_qnqms01za9pa-7{list-style-type:none}.lst-kix_tip1ogrrd5h8-4>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-4,lower-latin) ". "}ul.lst-kix_qnqms01za9pa-0{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-3.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-3 0}.lst-kix_tip1ogrrd5h8-2>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-2,lower-roman) ". "}ol.lst-kix_tip1ogrrd5h8-2{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-3{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-0{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-1{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-6{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-7{list-style-type:none}.lst-kix_tip1ogrrd5h8-3>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-3}ol.lst-kix_tip1ogrrd5h8-4{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-5{list-style-type:none}.lst-kix_qvadmjf36svb-4>li:before{content:"\0025cb  "}ol.lst-kix_tip1ogrrd5h8-8{list-style-type:none}.lst-kix_g5dgdm1ra0ag-8>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-8}.lst-kix_1fqu8uahmrfs-0>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-0,decimal) ". "}ol.lst-kix_1fqu8uahmrfs-4.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-4 0}.lst-kix_z09cyxkoxhrt-6>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-6,decimal) ". "}ol.lst-kix_gurzhmiybet-3.start{counter-reset:lst-ctn-kix_gurzhmiybet-3 0}.lst-kix_qvadmjf36svb-7>li:before{content:"\0025cb  "}.lst-kix_tip1ogrrd5h8-1>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-1}.lst-kix_g5dgdm1ra0ag-6>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-6}.lst-kix_1fqu8uahmrfs-0>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-0}ol.lst-kix_g5dgdm1ra0ag-1.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-1 0}ol.lst-kix_1fqu8uahmrfs-4{list-style-type:none}.lst-kix_g5dgdm1ra0ag-0>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-0,decimal) ". "}ol.lst-kix_1fqu8uahmrfs-5{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-6{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-7{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-0{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-1{list-style-type:none}.lst-kix_qvadmjf36svb-1>li:before{content:"\0025cb  "}ol.lst-kix_1fqu8uahmrfs-2{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-3{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-8{list-style-type:none}.lst-kix_z09cyxkoxhrt-4>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-4}ol.lst-kix_gurzhmiybet-0.start{counter-reset:lst-ctn-kix_gurzhmiybet-0 0}.lst-kix_tip1ogrrd5h8-3>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-3,decimal) ". "}.lst-kix_z09cyxkoxhrt-5>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-5,lower-roman) ". "}ul.lst-kix_qvadmjf36svb-6{list-style-type:none}.lst-kix_gurzhmiybet-1>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-1,lower-latin) ". "}ul.lst-kix_qvadmjf36svb-7{list-style-type:none}ul.lst-kix_qvadmjf36svb-8{list-style-type:none}.lst-kix_z09cyxkoxhrt-3>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-3}ol.lst-kix_g5dgdm1ra0ag-3.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-3 0}ol.lst-kix_g5dgdm1ra0ag-8.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-8 0}.lst-kix_gurzhmiybet-4>li{counter-increment:lst-ctn-kix_gurzhmiybet-4}.lst-kix_qvadmjf36svb-3>li:before{content:"\0025cf  "}.lst-kix_z09cyxkoxhrt-8>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-8,lower-roman) ". "}ul.lst-kix_qvadmjf36svb-4{list-style-type:none}ul.lst-kix_qvadmjf36svb-5{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-7.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-7 0}ul.lst-kix_qvadmjf36svb-2{list-style-type:none}ul.lst-kix_qvadmjf36svb-3{list-style-type:none}ul.lst-kix_qvadmjf36svb-0{list-style-type:none}ul.lst-kix_qvadmjf36svb-1{list-style-type:none}.lst-kix_qnqms01za9pa-5>li:before{content:"\0025a0  "}.lst-kix_qnqms01za9pa-6>li:before{content:"\0025cf  "}ol.lst-kix_z09cyxkoxhrt-5.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-5 0}.lst-kix_qvadmjf36svb-0>li:before{content:"\0025cf  "}.lst-kix_z09cyxkoxhrt-6>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-6}.lst-kix_1fqu8uahmrfs-3>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-3,decimal) ". "}.lst-kix_gurzhmiybet-6>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-6,decimal) ". "}.lst-kix_gurzhmiybet-5>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-5,lower-roman) ". "}.lst-kix_gurzhmiybet-2>li{counter-increment:lst-ctn-kix_gurzhmiybet-2}.lst-kix_1fqu8uahmrfs-8>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-8,lower-roman) ". "}.lst-kix_tip1ogrrd5h8-4>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-4}ol.lst-kix_tip1ogrrd5h8-6.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-6 0}ol.lst-kix_g5dgdm1ra0ag-6.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-6 0}.lst-kix_g5dgdm1ra0ag-1>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-1,lower-latin) ". "}.lst-kix_gurzhmiybet-0>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-0,decimal) ". "}.lst-kix_qvadmjf36svb-8>li:before{content:"\0025a0  "}ol.lst-kix_tip1ogrrd5h8-8.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-8 0}.lst-kix_z09cyxkoxhrt-1>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-1,lower-latin) ". "}.lst-kix_1fqu8uahmrfs-5>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-5,lower-roman) ". "}.lst-kix_g5dgdm1ra0ag-8>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-8,lower-roman) ". "}.lst-kix_z09cyxkoxhrt-2>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-2}ol.lst-kix_1fqu8uahmrfs-7.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-7 0}.lst-kix_g5dgdm1ra0ag-6>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-6,decimal) ". "}ol.lst-kix_1fqu8uahmrfs-6.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-6 0}ol.lst-kix_z09cyxkoxhrt-0.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-0 0}ol.lst-kix_1fqu8uahmrfs-0.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-0 0}ol.lst-kix_g5dgdm1ra0ag-0.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-0 0}.lst-kix_g5dgdm1ra0ag-4>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-4,lower-latin) ". "}.lst-kix_gurzhmiybet-2>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-2,lower-roman) ". "}.lst-kix_gurzhmiybet-0>li{counter-increment:lst-ctn-kix_gurzhmiybet-0}ol.lst-kix_gurzhmiybet-8{list-style-type:none}ol.lst-kix_z09cyxkoxhrt-8.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-8 0}ol.lst-kix_gurzhmiybet-7{list-style-type:none}ol.lst-kix_gurzhmiybet-6{list-style-type:none}ol.lst-kix_gurzhmiybet-5{list-style-type:none}ol.lst-kix_gurzhmiybet-4{list-style-type:none}ol.lst-kix_gurzhmiybet-3{list-style-type:none}ol.lst-kix_gurzhmiybet-2{list-style-type:none}ol.lst-kix_gurzhmiybet-1{list-style-type:none}ol.lst-kix_gurzhmiybet-0{list-style-type:none}.lst-kix_g5dgdm1ra0ag-1>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-1}.lst-kix_qnqms01za9pa-2>li:before{content:"\0025a0  "}ol.lst-kix_gurzhmiybet-7.start{counter-reset:lst-ctn-kix_gurzhmiybet-7 0}ol.lst-kix_gurzhmiybet-1.start{counter-reset:lst-ctn-kix_gurzhmiybet-1 0}ol.lst-kix_z09cyxkoxhrt-3.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-3 0}.lst-kix_z09cyxkoxhrt-0>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-0,decimal) ". "}.lst-kix_tip1ogrrd5h8-2>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-2}.lst-kix_tip1ogrrd5h8-8>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-8}ol.lst-kix_tip1ogrrd5h8-4.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-4 0}ol.lst-kix_1fqu8uahmrfs-8.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-8 0}ol.lst-kix_1fqu8uahmrfs-2.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-2 0}.lst-kix_1fqu8uahmrfs-2>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-2,lower-roman) ". "}ol.lst-kix_gurzhmiybet-8.start{counter-reset:lst-ctn-kix_gurzhmiybet-8 0}ol.lst-kix_z09cyxkoxhrt-7.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-7 0}.lst-kix_z09cyxkoxhrt-5>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-5}.lst-kix_1fqu8uahmrfs-2>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-2}.lst-kix_1fqu8uahmrfs-1>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-1}ol.lst-kix_z09cyxkoxhrt-4.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-4 0}ol.lst-kix_tip1ogrrd5h8-5.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-5 0}.lst-kix_g5dgdm1ra0ag-7>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-7,lower-latin) ". "}.lst-kix_1fqu8uahmrfs-6>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-6,decimal) ". "}.lst-kix_1fqu8uahmrfs-7>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-7}.lst-kix_tip1ogrrd5h8-1>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-1,lower-latin) ". "}.lst-kix_gurzhmiybet-3>li{counter-increment:lst-ctn-kix_gurzhmiybet-3}ol.lst-kix_z09cyxkoxhrt-1.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-1 0}.lst-kix_tip1ogrrd5h8-7>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-7,lower-latin) ". "}.lst-kix_z09cyxkoxhrt-0>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-0}.lst-kix_gurzhmiybet-7>li{counter-increment:lst-ctn-kix_gurzhmiybet-7}ol.lst-kix_gurzhmiybet-2.start{counter-reset:lst-ctn-kix_gurzhmiybet-2 0}.lst-kix_1fqu8uahmrfs-1>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-1,lower-latin) ". "}.lst-kix_gurzhmiybet-6>li{counter-increment:lst-ctn-kix_gurzhmiybet-6}.lst-kix_gurzhmiybet-7>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-7,lower-latin) ". "}.lst-kix_qvadmjf36svb-5>li:before{content:"\0025a0  "}.lst-kix_g5dgdm1ra0ag-5>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-5,lower-roman) ". "}.lst-kix_g5dgdm1ra0ag-3>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-3,decimal) ". "}.lst-kix_tip1ogrrd5h8-0>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-0}.lst-kix_1fqu8uahmrfs-7>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-7,lower-latin) ". "}.lst-kix_qnqms01za9pa-3>li:before{content:"\0025cf  "}.lst-kix_1fqu8uahmrfs-5>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-5}ol.lst-kix_1fqu8uahmrfs-1.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-1 0}.lst-kix_gurzhmiybet-8>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-8,lower-roman) ". "}ol.lst-kix_z09cyxkoxhrt-6.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-6 0}.lst-kix_1fqu8uahmrfs-3>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-3}.lst-kix_z09cyxkoxhrt-2>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-2,lower-roman) ". "}.lst-kix_qnqms01za9pa-7>li:before{content:"\0025cb  "}ol.lst-kix_tip1ogrrd5h8-3.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-3 0}.lst-kix_1fqu8uahmrfs-4>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-4,lower-latin) ". "}.lst-kix_tip1ogrrd5h8-8>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-8,lower-roman) ". "}.lst-kix_g5dgdm1ra0ag-4>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-4}ol.lst-kix_tip1ogrrd5h8-1.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-1 0}.lst-kix_qnqms01za9pa-1>li:before{content:"\0025cb  "}.lst-kix_1fqu8uahmrfs-8>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-8}ol.lst-kix_gurzhmiybet-4.start{counter-reset:lst-ctn-kix_gurzhmiybet-4 0}ol.lst-kix_z09cyxkoxhrt-2.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-2 0}ol.lst-kix_tip1ogrrd5h8-7.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-7 0}ol.lst-kix_tip1ogrrd5h8-0.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-0 0}ol.lst-kix_g5dgdm1ra0ag-2.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-2 0}.lst-kix_g5dgdm1ra0ag-3>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-3}.lst-kix_z09cyxkoxhrt-7>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-7,lower-latin) ". "}.lst-kix_tip1ogrrd5h8-5>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-5}.lst-kix_tip1ogrrd5h8-7>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-7}.lst-kix_gurzhmiybet-4>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-4,lower-latin) ". "}ol.lst-kix_z09cyxkoxhrt-0{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-4.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-4 0}ol.lst-kix_z09cyxkoxhrt-1{list-style-type:none}.lst-kix_z09cyxkoxhrt-7>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-7}.lst-kix_qvadmjf36svb-6>li:before{content:"\0025cf  "}.lst-kix_g5dgdm1ra0ag-2>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-2,lower-roman) ". "}ol.lst-kix_g5dgdm1ra0ag-7{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-8{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-6{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-5{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-4{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-3{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-2{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-1{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-0{list-style-type:none}.lst-kix_g5dgdm1ra0ag-7>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-7}ol.lst-kix_z09cyxkoxhrt-8{list-style-type:none}ol.lst-kix_z09cyxkoxhrt-7{list-style-type:none}ol.lst-kix_z09cyxkoxhrt-6{list-style-type:none}.lst-kix_qvadmjf36svb-2>li:before{content:"\0025a0  "}ol.lst-kix_z09cyxkoxhrt-5{list-style-type:none}.lst-kix_g5dgdm1ra0ag-0>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-0}ol.lst-kix_z09cyxkoxhrt-4{list-style-type:none}.lst-kix_gurzhmiybet-1>li{counter-increment:lst-ctn-kix_gurzhmiybet-1}ol.lst-kix_z09cyxkoxhrt-3{list-style-type:none}.lst-kix_1fqu8uahmrfs-6>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-6}ol.lst-kix_z09cyxkoxhrt-2{list-style-type:none}ol.lst-kix_gurzhmiybet-5.start{counter-reset:lst-ctn-kix_gurzhmiybet-5 0}.lst-kix_gurzhmiybet-8>li{counter-increment:lst-ctn-kix_gurzhmiybet-8}.lst-kix_tip1ogrrd5h8-6>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-6}.lst-kix_1fqu8uahmrfs-4>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-4}.lst-kix_gurzhmiybet-5>li{counter-increment:lst-ctn-kix_gurzhmiybet-5}ol.lst-kix_gurzhmiybet-6.start{counter-reset:lst-ctn-kix_gurzhmiybet-6 0}ol.lst-kix_tip1ogrrd5h8-2.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-2 0}.lst-kix_z09cyxkoxhrt-4>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-4,lower-latin) ". "}ol.lst-kix_1fqu8uahmrfs-5.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-5 0}.lst-kix_gurzhmiybet-3>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-3,decimal) ". "}.lst-kix_qnqms01za9pa-0>li:before{content:"\0025cf  "}.lst-kix_z09cyxkoxhrt-8>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-8}.lst-kix_g5dgdm1ra0ag-5>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-5}ol{margin:0;padding:0}.c4{widows:2;orphans:2;margin-left:36pt}.c16{max-width:525.6pt;background-color:#ffffff;padding:43.2pt 43.2pt 43.2pt 43.2pt}.c0{font-size:9pt;font-family:"Courier New"}.c11{text-indent:34.5pt;margin-left:109.5pt}.c19{color:#6aa84f;font-family:"Courier New"}.c23{color:#3c78d8;font-family:"Courier New"}.c26{margin:0;padding:0}.c10{text-indent:34.5pt;margin-left:73.5pt}.c2{direction:ltr;margin-left:72pt}.c20{text-indent:34.5pt;margin-left:1.5pt}.c1{height:11pt;direction:ltr}.c9{widows:2;orphans:2}.c17{color:#e69138;font-family:"Courier New"}.c3{direction:ltr}.c18{text-align:center}.c5{margin-left:36pt}.c12{margin-left:73.5pt}.c21{color:#674ea7}.c28{color:#3c78d8}.c22{font-size:9pt}.c14{font-style:italic}.c7{text-indent:36pt}.c30{padding-top:10pt}.c6{margin-left:108pt}.c15{color:#cc0000}.c8{page-break-after:avoid}.c27{color:#e69138}.c31{font-size:14pt}.c13{padding-left:0pt}.c25{font-family:"Courier New"}.c29{font-size:18pt}.c24{font-weight:bold}.title{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}.subtitle{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt;page-break-after:avoid}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h2{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h3{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h4{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h5{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h6{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}</style></head><body class="c16"><p class="c3 c8 c18 title"><a name="h.j38mvsst7fff"></a><span>Airbitz Wallet</span></p><p class="c3 c18 c8 title"><a name="h.2qls5apz7bsm"></a><span>Data Model</span></p><h1 class="c3 c8"><a name="h.8u1c8119l06p"></a><span>File Structure</span></h1><p class="c3"><span class="c0">/Accounts</span></p><p class="c20 c3"><span class="c0">/Info.json &lt;- various information like obelisk servers</span></p><p class="c3 c20"><span class="c0">/Questions.json &lt;- recovery questions choices</span></p><p class="c20 c3"><span class="c0">/Account_1</span></p><p class="c3 c5 c7"><span class="c0">/UserName.json</span></p><p class="c3 c5 c7"><span class="c0">/CarePackage.json</span></p><p class="c3 c5 c7"><span class="c0">/LoginPackage.json</span></p><p class="c3 c5 c7"><span class="c0">/sync &lt;- All data in this directory encrypted with MK</span></p><p class="c10 c3"><span class="c0">/.git</span></p><p class="c10 c3"><span class="c0">/Settings.json</span></p><p class="c10 c3"><span class="c0">/Categories.json</span></p><p class="c10 c3"><span class="c0">/Wallets</span></p><p class="c3 c11"><span class="c0">/&lt;Wallet_UUID1&gt;.json</span></p><p class="c3 c7"><span class="c0">/Account_2</span></p><p class="c3 c5 c7"><span class="c0">/UserName.json</span></p><p class="c3 c5 c7"><span class="c0">/CarePackage.json</span></p><p class="c3 c5 c7"><span class="c0">/LoginPackage.json</span></p><p class="c3 c5 c7"><span class="c0">/sync &lt;- All data in this directory encrypted with MK</span></p><p class="c3 c10"><span class="c0">/.git</span></p><p class="c10 c3"><span class="c0">/Settings.json</span></p><p class="c10 c3"><span class="c0">/Categories.json</span></p><p class="c10 c3"><span class="c0">/Wallets</span></p><p class="c3 c7 c6"><span class="c0">/&lt;Wallet_UUID2&gt;.json</span></p><p class="c3 c7 c6"><span class="c0">/&lt;Wallet_UUID3&gt;.json</span></p><p class="c3"><span class="c0">/Wallets</span></p><p class="c3 c7"><span class="c0">/</span><span class="c0">&lt;Wallet_UUID1&gt; </span><span class="c0">&nbsp;&lt;- All data in this directory encrypted with MK_&lt;Wallet_UUID1&gt;</span></p><p class="c3 c5 c7"><span class="c0">/sync</span></p><p class="c2 c7"><span class="c0">/.git</span></p><p class="c3 c6"><span class="c0">/WalletName.json</span></p><p class="c3 c6"><span class="c0">/Currency.json</span></p><p class="c3 c6"><span class="c0">/Attributes.json</span></p><p class="c3 c6"><span class="c0">/Accounts.json &lt;- account names that have this wallet</span></p><p class="c3 c6"><span class="c0">/Transactions</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-int.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-ext.json</span></p><p class="c3 c6"><span class="c0">/Addresses</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/0-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/1-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3 c5"><span class="c0">/&lt;Wallet_UUID2&gt; &nbsp;&lt;- All data in this directory encrypted with MK_&lt;Wallet_UUID2&gt;</span></p><p class="c2"><span class="c0">/sync</span></p><p class="c3 c6"><span class="c0">/.git</span></p><p class="c3 c6"><span class="c0">/WalletName.json</span></p><p class="c3 c6"><span class="c0">/Currency.json</span></p><p class="c3 c6"><span class="c0">/Attributes.json</span></p><p class="c3 c6"><span class="c0">/Accounts.json &lt;- account names that have this wallet</span></p><p class="c3 c6"><span class="c0">/Transactions</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-ext.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-ext.json</span></p><p class="c3 c6"><span class="c0">/Addresses</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/0-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/1-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/watcher-cache</span></p><p class="c3 c5"><span class="c0">/&lt;Wallet_UUID3&gt; &nbsp;&lt;- All data in this directory encrypted with MK_&lt;Wallet_UUID3&gt;</span></p><p class="c2"><span class="c0">/sync</span></p><p class="c3 c6"><span class="c0">/.git</span></p><p class="c3 c6"><span class="c0">/WalletName.json</span></p><p class="c3 c6"><span class="c0">/Currency.json</span></p><p class="c3 c6"><span class="c0">/Attributes.json</span></p><p class="c3 c6"><span class="c0">/Accounts.json &lt;- account names that have this wallet</span></p><p class="c3 c6"><span class="c0">/Transactions</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-int.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-int.json</span></p><p class="c3 c6"><span class="c0">/Addresses</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/0-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/1-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/watcher-cache</span></p><h1 class="c3 c8"><a name="h.j2nxhiypniof"></a><span>Storage Overview</span></h1><p class="c3"><span>Account General Data Local - Persisted in Non-Repository Data</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recovery Question Choices</span></p><p class="c1"><span></span></p><p class="c3"><span>Account Specific Data Local - Persisted in Non-Repository Data</span></p><p class="c3 c5"><span>User Name</span></p><p class="c3 c5"><span>Care Package (ERQ, SNRP2, SNRP3, &nbsp;and SNRP4)</span></p><p class="c3 c5"><span>Login Package (EMK, ERepoAcctKey, ELP2, ELRA3)</span></p><p class="c1 c5"><span></span></p><p class="c3"><span>Account Specific Data - Persisted in a Repository</span></p><p class="c3 c5"><span>Categories</span></p><p class="c3 c5"><span>Settings</span></p><p class="c3 c5"><span>Wallets associated with this account, including decryption key, sync key, Bitcoin master seed</span></p><p class="c1"><span></span></p><p class="c3"><span>Wallet Specific Data - Persisted in a Repository for any Account</span></p><p class="c3 c5"><span>Wallet Name</span></p><p class="c3 c5"><span>Currency (e.g., dollar, yen, etc)</span></p><p class="c3 c5"><span>Transactions</span></p><p class="c3 c5"><span>Bitcoin addresses (including metadata including purpose, date, etc.)</span></p><p class="c1 c5"><span></span></p><p class="c3"><span>Wallet Specific Data Local - Persisted in Non-Repository Data</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Blockchain watcher cache</span></p><h1 class="c3 c8 c30"><a name="h.yqynh7cokbmi"></a><span>General Concepts</span></h1><p class="c9 c3"><span>Every repository has both a sync key, which is used to authenticate with the Git server, and a master key, which is used to decrypt the contents. Every file in the repo is stored encrypted using this key.</span></p><p class="c1 c9"><span></span></p><p class="c3 c9"><span>The core stores cached data outside the sync repos. For the account, the core caches the Care Package and Login Package. These can be obtained from the login servers at any time, and should be frequently refreshed in case the user has changed their username or recovery questions. Keeping these files cached locally allows a login to take place without internet connectivity.</span></p><p class="c1 c9"><span></span></p><p class="c9 c3"><span>For the wallets, the core caches the blockchain state of all relevant transactions. This data can be refreshed at any time from the Bitcoin network, but the cache allows faster startup times.</span></p><p class="c1 c5"><span></span></p><p class="c3"><span>For portability and readability, where possible, all data to be stored in JSON and Base64 or Hex as specified for binary data.</span></p><h1 class="c3 c8"><a name="h.mbp3kfowxy3d"></a><span>Encryption Formats</span></h1><h2 class="c3 c8"><a name="h.9ntot8lyoa3r"></a><span>General Encryption Format</span></h2><p class="c3 c7"><span>Additional fields can be added as required by the encryption</span></p><p class="c3 c7"><span>Encryption types:</span></p><p class="c3 c7"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 = AES256-CBC</span></p><h2 class="c3 c8"><a name="h.ka9o83wuhycr"></a><span>AES256-CBC Encrypted Data</span></h2><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;iv_hex&quot;: &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c3 c5 c7"><span>with scrypt:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;encryptionType&quot;: 1,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;salt_hex&quot;: &quot;5a7d874s8d7fe89ef0de37aa6ff890bc&quot;,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;p&quot;: 1,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c3 c5 c7"><span>Notes: iv is in hex format and data is in base64</span></p><p class="c3 c7"><span>Format of decrypted data:</span></p><p class="c2"><span>1 byte: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h (the number of random header bytes)</span></p><p class="c2"><span>h bytes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h random header bytes</span></p><p class="c2"><span>4 bytes: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length of data (big endian)</span></p><p class="c2"><span>x bytes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data (x bytes)</span></p><p class="c3 c5 c7"><span>1 byte: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f (the number of random footer bytes)</span></p><p class="c3 c5 c7"><span>f bytes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f random header bytes</span></p><p class="c3 c5 c7"><span>32 bytes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;32 bytes SHA256 of all data up to this point</span></p><p class="c3 c5 c7"><span>Total bytes: h + f + x + 38</span></p><p class="c3 c7"><span>Example of decrypted data:</span></p><p class="c3 c7"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unencrypted data: </span><span class="c15">7a</span></p><p class="c3 c7"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of random header bytes: </span><span class="c21">02</span><span>&nbsp;(</span><span class="c27">a5bc</span><span>)</span></p><p class="c3 c5 c7"><span>Number of random footer bytes: </span><span class="c21">03</span><span>&nbsp;(</span><span class="c27">bc0a10</span><span>)</span></p><p class="c3 c7"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length </span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SHA256:</span></p><p class="c3 c5 c7"><span>&nbsp; </span><span class="c28">594e519ae499312b29433b7dd8a97ff068defcba9755b6d5d00e84c524d67b06</span></p><p class="c3 c5 c7"><span>Total length: 44</span></p><p class="c3 c5 c7"><span>Final form:</span></p><p class="c2 c7"><span class="c21 c25">02 </span><span class="c17">a5 bc </span><span class="c19">00 00 00 01</span><span class="c17">&nbsp;</span><span class="c15 c25">7a </span><span class="c21 c25">03</span><span class="c23">&nbsp;</span><span class="c17">bc 0a 10 </span><span class="c23">59 4e 51 9a </span></p><p class="c2 c7"><span class="c23">e4 99 31 2b 29 43 3b 7d d8 a9 7f f0 68 de fc ba </span></p><p class="c2 c7"><span class="c23">97 55 b6 d5 d0 0e 84 c5 24 d6 7b 06 </span></p><p class="c3 c5"><span>Overhead min: 38 bytes</span></p><p class="c3 c5"><span>Overhead max: 548 bytes</span></p><h2 class="c3 c8"><a name="h.2ii3jat0dpll"></a><span>SNRP</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This holds the Salt, N, r and p used in a given scrypt password derivation.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;salt_hex&quot;: &quot;6278b2958b41b3bd9b63182de5927fd0fe6f73b95b2a7cdbd9b47af15b5d805f&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;p&quot;: 1</span></p><p class="c2"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.agknk6di1o65"></a><span>Data Used but not stored on the client directly</span></h1><p class="c3"><span>RecoveryQ (RQ)</span></p><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>List of recovery questions selected by the user for password recovery.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">&quot;What was your childhood nickname?\nIn what city or town was your first job?\nWhat is the name of your favorite childhood friend?\nWhat street did you live on in third grade?\n&quot;In what city does your nearest sibling live?&quot;</span></p><p class="c1 c5 c7"><span class="c0"></span></p><p class="c3"><span>L1</span></p><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This holds the Username of an account Scrypt&rsquo;ed using SNRP1 (Salt, N, r and p agreed upon between the client code and server code).</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;L1&quot;: &quot;8e7cadb64d762beedb05f312bd81438dc6a793cab01cc148a26692f7d609b052&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c1"><span></span></p><p class="c3"><span>L</span><span>P1</span></p><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This holds the Password of an account Scrypt&rsquo;ed using SNRP1 (Salt, N, r and p agreed upon between the client code and server code).</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;LP1&quot;: &quot;b2b20c0df94c6ce928abd3721826771a0a08bd911ac0419eb04218a9445677f0&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c1"><span></span></p><p class="c3"><span>LRA1</span></p><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This holds the Username concatenated with the Recover Answers of an account Scrypt&rsquo;ed using SNRP1 (Salt, N, r and p agreed upon between the client code and server code).</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;LRA1&quot;: &quot;f60efccccfe6007277c2eb9a08a154600094e1b15a28cb0497545d6c29ab299e&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c1"><span></span></p><p class="c3"><span>Wallet ID (&lt;Wallet_UUID&gt;)</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description</span></p><p class="c2"><span>This UUID should be unique across all users and all accounts to facilitate the ability to share wallets between accounts.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">AF00D7B7-85D0-498D-AABD-F607849CEBF1</span></p><h1 class="c3 c8"><a name="h.bbgjntm1dcf1"></a><span>Account General Data Local - Persisted in Non-Repository Data</span></h1><h2 class="c3 c8"><a name="h.uy6wr41574kx"></a><span>Info</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>Contains information provided by the AirBitz server include Obelisk Servers, AirBitz fees and miners fees.</span></p><p class="c3 c5"><span>Format with Sample Data</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;minersFees&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;feeSatoshi&quot;: 10000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;txSizeBytes&quot;: 300</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;feeSatoshi&quot;: 10000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;txSizeBytes&quot;: 1000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;feeSatoshi&quot;: 20000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;txSizeBytes&quot;: 2000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ],</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;feesAirBitz&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;percentage&quot;: 5,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;maxSatoshi&quot;: 1000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;minSatoshi&quot;: 500,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;address&quot;: &quot;1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;obeliskServers&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;tcp://obelisk1.airbitz.co&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;tcp://obelisk2.airbitz.co&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;tcp://obelisk3.airbitz.co&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.vv43m81qj2g"></a><span>Recovery Question Choices</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>These are the questions the user can choose from for recovery.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;questions&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;integer&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;min_length&quot;: 4,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;question&quot;: &quot;What year were you born?&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;string&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;min_length&quot;: 4,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;question&quot;: &quot;What is your favorite book?&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;string&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;min_length&quot;: 4,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;question&quot;: &quot;What is the name of your first pet?&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.tpi63av9t1y"></a><span>Account-Specific Cache Data</span></h1><p class="c9 c3"><span>This data is stored outside the sync directory.</span></p><h2 class="c3 c8"><a name="h.cf5q0jevphj"></a><span>User Name</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>The username entered by the user when they first created the account.</span></p><p class="c2"><span>Used to help facilitate login</span></p><p class="c2"><span>Stored in Non-Repository folder </span></p><p class="c2"><span>Stored without encryption (?)</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data:</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;userName&quot;: &quot;Paul007&quot;</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.9auo8empx0rl"></a><span>Care Package</span></h2><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description:</span></p><p class="c2"><span>The concept behind this package is that the server can give this to the client when the client has forgotten their password. It starts the process off by providing the recovery questions (encrypted) and the sets of Salt,N,r,p used for the scrypt calls on different key encryptions.</span></p><p class="c2"><span>It is possible for the CarePackage not to contain the ERQ field. In this case, the user has not set recovery questions.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;ERQ&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &quot;75243b7137a184d5709373744a5f730f&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;YpxiYY3MQk4bJBYhfXFXHJZYmz0b7d37McKRB7Ae5iR8Obvp2Ivf0UtOC0vT1M3JDUldGB+qGXOLOtmkrvSeVzctLI+CTG3/HJIAVNg8+cbVSC/+WzMHLD9VCcJyrT9HsN8UyLvDgEM0KSHTZv2naDkr2ywaF/aKeH/sOK03fqaLDqiEOkc2AyiY+/XOQJgoSBhO6VgAswEqAenTg85hQSdxCIGPtx/a1RQHznUMvRabnGnEPNPqI9ZJ5lGLDBXugAD5IqEncxtlO4WbQ1q0+Q==&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;SNRP2&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;salt_hex&quot;: &quot;15b7121891f6fd7e184a1f289e2a3eac02e0284c3950a33f7d20435606c6768e&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;p&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;SNRP3&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;salt_hex&quot;: &quot;c1c6688f396502afa7c188322baee72cf3e31e15197e5e13d9ac76cbef393dd1&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;p&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;SNRP4&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;salt_hex&quot;: &quot;64571b77ffaa307a650f5d060169b87772da6152257a8452b42813a4aa2d134e&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;p&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.kpi2bwtahvh"></a><span>Login Package</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This file contains all the information needed to access the account-specific sync directory, given either a password or a set of recovery answers. The ELP2 and ELRA3 fields are not present if the user has not set recovery questions.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c12"><span class="c0">{</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &quot;MK&quot;: {</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &quot;SyncKey&quot;: {</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &quot;ELP2&quot;: {</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &quot;ELRA3&quot;: {</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c3 c12"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.8ts3sk8feeuo"></a><span>Account-Specific Sync Data</span></h1><p class="c9 c3"><span>All data in the sync repo is stored encrypted using the account MK. The unencrypted data is shown here.</span></p><h2 class="c3 c8"><a name="h.2q0emu11dtne"></a><span>Settings</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>User settings for the account.</span></p><p class="c3 c5"><span>Format</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;firstName&quot;: &quot;Paul&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;lastName&quot;: &quot;Puey&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;nickname&quot;: &quot;DoubleP&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;nameOnPayments&quot;: true,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;minutesAutoLogout&quot;: 60,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;language&quot;: &quot;en&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;numCurrency&quot;: 840,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;exchangeRateSources&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;numCurrency&quot;: 840,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;exchangeRateSource&quot;: &quot;bitstamp&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;numCurrency&quot;: 124,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;exchangeRateSource&quot;: &quot;cavirtex&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ],</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;bitcoinDenomination&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;denominationType&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;satoshi&quot;: 100000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;advancedFeatures&quot;: true</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.vsbl5jldoqfc"></a><span>PIN</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This should logically go in the settings</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;PIN&quot;: &quot;12345&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.uj8u4h7w8bu1"></a><span>Categories</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>Categories strings attached to transactions by user.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;categories&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;Products&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;Food&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;Gas&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.h17jt5djxagk"></a><span>Wallets</span></h2><p class="c3 c5"><span>Description</span></p><p class="c3 c12"><span>One file for each wallet associated with this account.</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data</span></p><p class="c3 c12"><span>The SyncKey is used to access the sync repo.</span></p><p class="c3 c12"><span>The MK is used to decrypt the contents of the wallet sync repo.</span></p><p class="c3 c12"><span>The BPS is the BIP-32 private seed (raw entropy) needed to access funds in the wallet. This is not present for read-only wallets. Multi-sig or other types of wallets may do something different for this field in the future.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;MK&quot;: &quot;a8f0b97515e62e0365e0bb21b9a7441ad7dfd0fb6212e736455f2b40612895e4&quot;,</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;BPS&quot;: &quot;cd9605fe6c5b30a601147f2bfeffb98f89a020ff15bf62a784d6fa6b63f24fe7&quot;,</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;SyncKey&quot;: &quot;e2282926a75a8bafb4677728749f4d2a&quot;</span></p><p class="c2"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.2olse1dkf8to"></a><span>Wallet-Specific Sync Data</span></h1><p class="c3"><span>All data in the sync repo is stored encrypted using the wallet MK. The unencrypted data is shown here.</span></p><h2 class="c3 c8"><a name="h.xtde0t6bg4oi"></a><span>Wallet Name</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>This is the name the users uses to refer to the wallet. It is assigned when the user creates the wallet.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;walletName&quot;: &quot;Savings&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.cl9c9o9uiadr"></a><span>Currency</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>The currency type to be used in a given wallet. The value is a ISO 4217 number.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;num&quot;: 840</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.ks1m1hex6vcx"></a><span>Attributes</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>This is used to store flags representing the attributes of a wallet. For example, an archived bit can be set to represent that the wallet is archived.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;attributes&quot;: 1</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.rwubh58c77lt"></a><span>Accounts</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>List of all the accounts that have this wallet</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;accounts&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;John Smith&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.5qjq36eqas6v"></a><span>Transaction</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This data represents a transaction made with Bitcoin (payment or receipt of payment) in a given wallet.</span></p><p class="c2"><span>Note: </span></p><p class="c3 c6"><span>The name of the file is the ntxid in hex followed by a </span><span class="c14">-int </span><span>or </span><span class="c14">-ext</span><span>.</span></p><p class="c3 c6"><span>Example: </span><span class="c0">2ba1345764a1a704b97d062b47b55c8632efc4d7c0c8039d78adf8a52bcba4fe-int.json</span></p><p class="c3 c6"><span>-int represents a transaction that was created as part of a send</span></p><p class="c3 c6"><span>-ext represents a transaction that was created due to information coming from the block chain (usually a receive)</span></p><p class="c3 c5"><span>Data</span></p><p class="c2"><span>Transaction ID from Bitcoin</span></p><p class="c2"><span>Meta Data</span></p><p class="c3 c6"><span>Amount in Satoshi for which the address was created</span></p><p class="c3 c6"><span>Amount in user currency for which the address was created</span></p><p class="c3 c6"><span>Name associated with this address</span></p><p class="c3 c6"><span>Directory business ID associated with this transaction</span></p><p class="c3 c6"><span>Category associated with this address</span></p><p class="c3 c6"><span>Notes associated with this address</span></p><p class="c3 c6"><span>Attributes associated with this address</span></p><p class="c2"><span>State Data</span></p><p class="c3 c6"><span>Creation date (seconds since epoch)</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;ntxid&quot;: &quot;2ba1345764a1a704b97d062b47b55c8632efc4d7c0c8039d78adf8a52bcba4fe&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;meta&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountSatoshi&quot;: 130000000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountFeeAirBitzSatoshi&quot;: 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountFeeMinersSatoshi&quot;: 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountCurrency&quot;: 739.34,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;John Smith&rsquo;s Auto&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;bizId&quot;: 42,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;Auto&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;notes&quot;: &quot;Tires&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;attributes&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;state&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;creationDate&quot;: 1394058599,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;internal&quot;: true</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;addresses&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.wuxjronibqkd"></a><span>Address</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This data represents a Bitcoin address that was created for use in a transaction.</span></p><p class="c3 c5"><span>Data</span></p><p class="c2"><span>Sequence number used to generate the Bitcoin address</span></p><p class="c2"><span>Public sided of the Bitcoin key-pair</span></p><p class="c2"><span>Meta Data</span></p><p class="c3 c6"><span>Amount in Satoshi for which the address was created</span></p><p class="c3 c6"><span>Amount in user currency for which the address was created</span></p><p class="c3 c6"><span>Name associated with this address</span></p><p class="c3 c6"><span>Directory business ID associated with this address</span></p><p class="c3 c6"><span>Category associated with this address</span></p><p class="c3 c6"><span>Notes associated with this address</span></p><p class="c3 c6"><span>Attributes associated with this address</span></p><p class="c2"><span>State Data</span></p><p class="c3 c6"><span>Recycleable bit</span></p><p class="c3 c6"><span>Creation date (seconds since epoch)</span></p><p class="c3 c6"><span>Activity</span></p><p class="c3 c6"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(array of transaction events)</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;seq&quot;: 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;address&quot;: &quot;1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;meta&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountSatoshi&quot;: 130000000,</span></p><p class="c3 c6"><span class="c0">&nbsp;&quot;amountFeeAirBitzSatoshi&quot; : 0,</span></p><p class="c2 c7"><span class="c0">&nbsp;&quot;amountFeeMinersSatoshi&quot; : 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountCurrency&quot;: 739.34,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;John Smith&rsquo;s Auto&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;bizId&quot;: 42,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;Auto&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;notes&quot;: &quot;Tires&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;attributes&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;state&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;recycleable&quot;: false,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;creationDate&quot;: 1394058599,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;activity&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ntxid&quot;: &quot;2ba1345764a1a704b97d062b47b55c8632efc4d7c0c8039d78adf8a52bcba4fe&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;date&quot;: 1394058599,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;amountSatoshi&quot;: 10000000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ntxid&quot;: &quot;2ba1345764a1a704b97d062b47b55c8632efc4d7c0c8039d78adf8a52bcba4fe&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;date&quot;: 1394058599,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;amountSatoshi&quot;: 3000000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.dmjxat6e9f27"></a><span>Wallet-Specific Cache Data</span></h1><h2 class="c9 c3 c8"><a name="h.nk8g3ad7kh9"></a><span>Watcher Cache</span></h2><p class="c3 c4"><span>The wallet watcher service (a future part of libbitcoin) is responsible for monitoring a set of addresses on the Blockchain and maintaining a local copy of all transactions related to those addresses. This service can persist it state to disk, avoiding a full Blockchain re-scan on each startup. The format of this data is determined by libbitcoin.</span></p></body></html>'
    html = clean_gdoc_html(gdoc_html, images=False)
    context = {
        'page_title': 'Bitcoin Wallet Data Model',
        'page_description': 'Technical document describing the open source Airbitz core library internal data model.',
        'gdoc_style': html['style'],
        'gdoc_body': html['body'],
    }
    return render_to_response('pages/page_bitcoin-wallet-data-model.html', RequestContext(request, context))

def page_bitcoin_wallet_data_sync_architecture(request):
    context = {
        'page_title': 'Bitcoin Wallet Data Sync Architecture',
        'page_description': 'This Airbitz technical document describes the data sync processes, procedures and technology used by the server and mobile app.',
    }
    return render_to_response('pages/page_bitcoin-wallet-data-sync-architecture.html', RequestContext(request, context))

def page_bitcoin_wallet_server_api(request):
    gdoc_html = '<html><head><title>Airbitz Wallet Data Model</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style>.lst-kix_qnqms01za9pa-8>li:before{content:"\0025a0  "}.lst-kix_tip1ogrrd5h8-0>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-0,decimal) ". "}.lst-kix_qnqms01za9pa-4>li:before{content:"\0025cb  "}.lst-kix_tip1ogrrd5h8-6>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-6,decimal) ". "}ol.lst-kix_g5dgdm1ra0ag-5.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-5 0}.lst-kix_g5dgdm1ra0ag-2>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-2}ul.lst-kix_qnqms01za9pa-2{list-style-type:none}ul.lst-kix_qnqms01za9pa-1{list-style-type:none}ul.lst-kix_qnqms01za9pa-4{list-style-type:none}ul.lst-kix_qnqms01za9pa-3{list-style-type:none}ul.lst-kix_qnqms01za9pa-6{list-style-type:none}.lst-kix_z09cyxkoxhrt-3>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-3,decimal) ". "}ul.lst-kix_qnqms01za9pa-5{list-style-type:none}.lst-kix_tip1ogrrd5h8-5>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-5,lower-roman) ". "}.lst-kix_z09cyxkoxhrt-1>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-1}ul.lst-kix_qnqms01za9pa-8{list-style-type:none}ul.lst-kix_qnqms01za9pa-7{list-style-type:none}.lst-kix_tip1ogrrd5h8-4>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-4,lower-latin) ". "}ul.lst-kix_qnqms01za9pa-0{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-3.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-3 0}.lst-kix_tip1ogrrd5h8-2>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-2,lower-roman) ". "}ol.lst-kix_tip1ogrrd5h8-2{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-3{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-0{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-1{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-6{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-7{list-style-type:none}.lst-kix_tip1ogrrd5h8-3>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-3}ol.lst-kix_tip1ogrrd5h8-4{list-style-type:none}ol.lst-kix_tip1ogrrd5h8-5{list-style-type:none}.lst-kix_qvadmjf36svb-4>li:before{content:"\0025cb  "}ol.lst-kix_tip1ogrrd5h8-8{list-style-type:none}.lst-kix_g5dgdm1ra0ag-8>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-8}.lst-kix_1fqu8uahmrfs-0>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-0,decimal) ". "}ol.lst-kix_1fqu8uahmrfs-4.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-4 0}.lst-kix_z09cyxkoxhrt-6>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-6,decimal) ". "}ol.lst-kix_gurzhmiybet-3.start{counter-reset:lst-ctn-kix_gurzhmiybet-3 0}.lst-kix_qvadmjf36svb-7>li:before{content:"\0025cb  "}.lst-kix_tip1ogrrd5h8-1>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-1}.lst-kix_g5dgdm1ra0ag-6>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-6}.lst-kix_1fqu8uahmrfs-0>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-0}ol.lst-kix_g5dgdm1ra0ag-1.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-1 0}ol.lst-kix_1fqu8uahmrfs-4{list-style-type:none}.lst-kix_g5dgdm1ra0ag-0>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-0,decimal) ". "}ol.lst-kix_1fqu8uahmrfs-5{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-6{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-7{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-0{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-1{list-style-type:none}.lst-kix_qvadmjf36svb-1>li:before{content:"\0025cb  "}ol.lst-kix_1fqu8uahmrfs-2{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-3{list-style-type:none}ol.lst-kix_1fqu8uahmrfs-8{list-style-type:none}.lst-kix_z09cyxkoxhrt-4>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-4}ol.lst-kix_gurzhmiybet-0.start{counter-reset:lst-ctn-kix_gurzhmiybet-0 0}.lst-kix_tip1ogrrd5h8-3>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-3,decimal) ". "}.lst-kix_z09cyxkoxhrt-5>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-5,lower-roman) ". "}ul.lst-kix_qvadmjf36svb-6{list-style-type:none}.lst-kix_gurzhmiybet-1>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-1,lower-latin) ". "}ul.lst-kix_qvadmjf36svb-7{list-style-type:none}ul.lst-kix_qvadmjf36svb-8{list-style-type:none}.lst-kix_z09cyxkoxhrt-3>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-3}ol.lst-kix_g5dgdm1ra0ag-3.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-3 0}ol.lst-kix_g5dgdm1ra0ag-8.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-8 0}.lst-kix_gurzhmiybet-4>li{counter-increment:lst-ctn-kix_gurzhmiybet-4}.lst-kix_qvadmjf36svb-3>li:before{content:"\0025cf  "}.lst-kix_z09cyxkoxhrt-8>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-8,lower-roman) ". "}ul.lst-kix_qvadmjf36svb-4{list-style-type:none}ul.lst-kix_qvadmjf36svb-5{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-7.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-7 0}ul.lst-kix_qvadmjf36svb-2{list-style-type:none}ul.lst-kix_qvadmjf36svb-3{list-style-type:none}ul.lst-kix_qvadmjf36svb-0{list-style-type:none}ul.lst-kix_qvadmjf36svb-1{list-style-type:none}.lst-kix_qnqms01za9pa-5>li:before{content:"\0025a0  "}.lst-kix_qnqms01za9pa-6>li:before{content:"\0025cf  "}ol.lst-kix_z09cyxkoxhrt-5.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-5 0}.lst-kix_qvadmjf36svb-0>li:before{content:"\0025cf  "}.lst-kix_z09cyxkoxhrt-6>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-6}.lst-kix_1fqu8uahmrfs-3>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-3,decimal) ". "}.lst-kix_gurzhmiybet-6>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-6,decimal) ". "}.lst-kix_gurzhmiybet-5>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-5,lower-roman) ". "}.lst-kix_gurzhmiybet-2>li{counter-increment:lst-ctn-kix_gurzhmiybet-2}.lst-kix_1fqu8uahmrfs-8>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-8,lower-roman) ". "}.lst-kix_tip1ogrrd5h8-4>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-4}ol.lst-kix_tip1ogrrd5h8-6.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-6 0}ol.lst-kix_g5dgdm1ra0ag-6.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-6 0}.lst-kix_g5dgdm1ra0ag-1>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-1,lower-latin) ". "}.lst-kix_gurzhmiybet-0>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-0,decimal) ". "}.lst-kix_qvadmjf36svb-8>li:before{content:"\0025a0  "}ol.lst-kix_tip1ogrrd5h8-8.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-8 0}.lst-kix_z09cyxkoxhrt-1>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-1,lower-latin) ". "}.lst-kix_1fqu8uahmrfs-5>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-5,lower-roman) ". "}.lst-kix_g5dgdm1ra0ag-8>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-8,lower-roman) ". "}.lst-kix_z09cyxkoxhrt-2>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-2}ol.lst-kix_1fqu8uahmrfs-7.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-7 0}.lst-kix_g5dgdm1ra0ag-6>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-6,decimal) ". "}ol.lst-kix_1fqu8uahmrfs-6.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-6 0}ol.lst-kix_z09cyxkoxhrt-0.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-0 0}ol.lst-kix_1fqu8uahmrfs-0.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-0 0}ol.lst-kix_g5dgdm1ra0ag-0.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-0 0}.lst-kix_g5dgdm1ra0ag-4>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-4,lower-latin) ". "}.lst-kix_gurzhmiybet-2>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-2,lower-roman) ". "}.lst-kix_gurzhmiybet-0>li{counter-increment:lst-ctn-kix_gurzhmiybet-0}ol.lst-kix_gurzhmiybet-8{list-style-type:none}ol.lst-kix_z09cyxkoxhrt-8.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-8 0}ol.lst-kix_gurzhmiybet-7{list-style-type:none}ol.lst-kix_gurzhmiybet-6{list-style-type:none}ol.lst-kix_gurzhmiybet-5{list-style-type:none}ol.lst-kix_gurzhmiybet-4{list-style-type:none}ol.lst-kix_gurzhmiybet-3{list-style-type:none}ol.lst-kix_gurzhmiybet-2{list-style-type:none}ol.lst-kix_gurzhmiybet-1{list-style-type:none}ol.lst-kix_gurzhmiybet-0{list-style-type:none}.lst-kix_g5dgdm1ra0ag-1>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-1}.lst-kix_qnqms01za9pa-2>li:before{content:"\0025a0  "}ol.lst-kix_gurzhmiybet-7.start{counter-reset:lst-ctn-kix_gurzhmiybet-7 0}ol.lst-kix_gurzhmiybet-1.start{counter-reset:lst-ctn-kix_gurzhmiybet-1 0}ol.lst-kix_z09cyxkoxhrt-3.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-3 0}.lst-kix_z09cyxkoxhrt-0>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-0,decimal) ". "}.lst-kix_tip1ogrrd5h8-2>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-2}.lst-kix_tip1ogrrd5h8-8>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-8}ol.lst-kix_tip1ogrrd5h8-4.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-4 0}ol.lst-kix_1fqu8uahmrfs-8.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-8 0}ol.lst-kix_1fqu8uahmrfs-2.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-2 0}.lst-kix_1fqu8uahmrfs-2>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-2,lower-roman) ". "}ol.lst-kix_gurzhmiybet-8.start{counter-reset:lst-ctn-kix_gurzhmiybet-8 0}ol.lst-kix_z09cyxkoxhrt-7.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-7 0}.lst-kix_z09cyxkoxhrt-5>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-5}.lst-kix_1fqu8uahmrfs-2>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-2}.lst-kix_1fqu8uahmrfs-1>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-1}ol.lst-kix_z09cyxkoxhrt-4.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-4 0}ol.lst-kix_tip1ogrrd5h8-5.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-5 0}.lst-kix_g5dgdm1ra0ag-7>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-7,lower-latin) ". "}.lst-kix_1fqu8uahmrfs-6>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-6,decimal) ". "}.lst-kix_1fqu8uahmrfs-7>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-7}.lst-kix_tip1ogrrd5h8-1>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-1,lower-latin) ". "}.lst-kix_gurzhmiybet-3>li{counter-increment:lst-ctn-kix_gurzhmiybet-3}ol.lst-kix_z09cyxkoxhrt-1.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-1 0}.lst-kix_tip1ogrrd5h8-7>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-7,lower-latin) ". "}.lst-kix_z09cyxkoxhrt-0>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-0}.lst-kix_gurzhmiybet-7>li{counter-increment:lst-ctn-kix_gurzhmiybet-7}ol.lst-kix_gurzhmiybet-2.start{counter-reset:lst-ctn-kix_gurzhmiybet-2 0}.lst-kix_1fqu8uahmrfs-1>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-1,lower-latin) ". "}.lst-kix_gurzhmiybet-6>li{counter-increment:lst-ctn-kix_gurzhmiybet-6}.lst-kix_gurzhmiybet-7>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-7,lower-latin) ". "}.lst-kix_qvadmjf36svb-5>li:before{content:"\0025a0  "}.lst-kix_g5dgdm1ra0ag-5>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-5,lower-roman) ". "}.lst-kix_g5dgdm1ra0ag-3>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-3,decimal) ". "}.lst-kix_tip1ogrrd5h8-0>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-0}.lst-kix_1fqu8uahmrfs-7>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-7,lower-latin) ". "}.lst-kix_qnqms01za9pa-3>li:before{content:"\0025cf  "}.lst-kix_1fqu8uahmrfs-5>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-5}ol.lst-kix_1fqu8uahmrfs-1.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-1 0}.lst-kix_gurzhmiybet-8>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-8,lower-roman) ". "}ol.lst-kix_z09cyxkoxhrt-6.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-6 0}.lst-kix_1fqu8uahmrfs-3>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-3}.lst-kix_z09cyxkoxhrt-2>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-2,lower-roman) ". "}.lst-kix_qnqms01za9pa-7>li:before{content:"\0025cb  "}ol.lst-kix_tip1ogrrd5h8-3.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-3 0}.lst-kix_1fqu8uahmrfs-4>li:before{content:"" counter(lst-ctn-kix_1fqu8uahmrfs-4,lower-latin) ". "}.lst-kix_tip1ogrrd5h8-8>li:before{content:"" counter(lst-ctn-kix_tip1ogrrd5h8-8,lower-roman) ". "}.lst-kix_g5dgdm1ra0ag-4>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-4}ol.lst-kix_tip1ogrrd5h8-1.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-1 0}.lst-kix_qnqms01za9pa-1>li:before{content:"\0025cb  "}.lst-kix_1fqu8uahmrfs-8>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-8}ol.lst-kix_gurzhmiybet-4.start{counter-reset:lst-ctn-kix_gurzhmiybet-4 0}ol.lst-kix_z09cyxkoxhrt-2.start{counter-reset:lst-ctn-kix_z09cyxkoxhrt-2 0}ol.lst-kix_tip1ogrrd5h8-7.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-7 0}ol.lst-kix_tip1ogrrd5h8-0.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-0 0}ol.lst-kix_g5dgdm1ra0ag-2.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-2 0}.lst-kix_g5dgdm1ra0ag-3>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-3}.lst-kix_z09cyxkoxhrt-7>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-7,lower-latin) ". "}.lst-kix_tip1ogrrd5h8-5>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-5}.lst-kix_tip1ogrrd5h8-7>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-7}.lst-kix_gurzhmiybet-4>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-4,lower-latin) ". "}ol.lst-kix_z09cyxkoxhrt-0{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-4.start{counter-reset:lst-ctn-kix_g5dgdm1ra0ag-4 0}ol.lst-kix_z09cyxkoxhrt-1{list-style-type:none}.lst-kix_z09cyxkoxhrt-7>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-7}.lst-kix_qvadmjf36svb-6>li:before{content:"\0025cf  "}.lst-kix_g5dgdm1ra0ag-2>li:before{content:"" counter(lst-ctn-kix_g5dgdm1ra0ag-2,lower-roman) ". "}ol.lst-kix_g5dgdm1ra0ag-7{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-8{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-6{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-5{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-4{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-3{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-2{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-1{list-style-type:none}ol.lst-kix_g5dgdm1ra0ag-0{list-style-type:none}.lst-kix_g5dgdm1ra0ag-7>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-7}ol.lst-kix_z09cyxkoxhrt-8{list-style-type:none}ol.lst-kix_z09cyxkoxhrt-7{list-style-type:none}ol.lst-kix_z09cyxkoxhrt-6{list-style-type:none}.lst-kix_qvadmjf36svb-2>li:before{content:"\0025a0  "}ol.lst-kix_z09cyxkoxhrt-5{list-style-type:none}.lst-kix_g5dgdm1ra0ag-0>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-0}ol.lst-kix_z09cyxkoxhrt-4{list-style-type:none}.lst-kix_gurzhmiybet-1>li{counter-increment:lst-ctn-kix_gurzhmiybet-1}ol.lst-kix_z09cyxkoxhrt-3{list-style-type:none}.lst-kix_1fqu8uahmrfs-6>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-6}ol.lst-kix_z09cyxkoxhrt-2{list-style-type:none}ol.lst-kix_gurzhmiybet-5.start{counter-reset:lst-ctn-kix_gurzhmiybet-5 0}.lst-kix_gurzhmiybet-8>li{counter-increment:lst-ctn-kix_gurzhmiybet-8}.lst-kix_tip1ogrrd5h8-6>li{counter-increment:lst-ctn-kix_tip1ogrrd5h8-6}.lst-kix_1fqu8uahmrfs-4>li{counter-increment:lst-ctn-kix_1fqu8uahmrfs-4}.lst-kix_gurzhmiybet-5>li{counter-increment:lst-ctn-kix_gurzhmiybet-5}ol.lst-kix_gurzhmiybet-6.start{counter-reset:lst-ctn-kix_gurzhmiybet-6 0}ol.lst-kix_tip1ogrrd5h8-2.start{counter-reset:lst-ctn-kix_tip1ogrrd5h8-2 0}.lst-kix_z09cyxkoxhrt-4>li:before{content:"" counter(lst-ctn-kix_z09cyxkoxhrt-4,lower-latin) ". "}ol.lst-kix_1fqu8uahmrfs-5.start{counter-reset:lst-ctn-kix_1fqu8uahmrfs-5 0}.lst-kix_gurzhmiybet-3>li:before{content:"" counter(lst-ctn-kix_gurzhmiybet-3,decimal) ". "}.lst-kix_qnqms01za9pa-0>li:before{content:"\0025cf  "}.lst-kix_z09cyxkoxhrt-8>li{counter-increment:lst-ctn-kix_z09cyxkoxhrt-8}.lst-kix_g5dgdm1ra0ag-5>li{counter-increment:lst-ctn-kix_g5dgdm1ra0ag-5}ol{margin:0;padding:0}.c4{widows:2;orphans:2;margin-left:36pt}.c16{max-width:525.6pt;background-color:#ffffff;padding:43.2pt 43.2pt 43.2pt 43.2pt}.c0{font-size:9pt;font-family:"Courier New"}.c11{text-indent:34.5pt;margin-left:109.5pt}.c19{color:#6aa84f;font-family:"Courier New"}.c23{color:#3c78d8;font-family:"Courier New"}.c26{margin:0;padding:0}.c10{text-indent:34.5pt;margin-left:73.5pt}.c2{direction:ltr;margin-left:72pt}.c20{text-indent:34.5pt;margin-left:1.5pt}.c1{height:11pt;direction:ltr}.c9{widows:2;orphans:2}.c17{color:#e69138;font-family:"Courier New"}.c3{direction:ltr}.c18{text-align:center}.c5{margin-left:36pt}.c12{margin-left:73.5pt}.c21{color:#674ea7}.c28{color:#3c78d8}.c22{font-size:9pt}.c14{font-style:italic}.c7{text-indent:36pt}.c30{padding-top:10pt}.c6{margin-left:108pt}.c15{color:#cc0000}.c8{page-break-after:avoid}.c27{color:#e69138}.c31{font-size:14pt}.c13{padding-left:0pt}.c25{font-family:"Courier New"}.c29{font-size:18pt}.c24{font-weight:bold}.title{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}.subtitle{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt;page-break-after:avoid}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h2{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h3{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h4{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h5{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h6{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}</style></head><body class="c16"><p class="c3 c8 c18 title"><a name="h.j38mvsst7fff"></a><span>Airbitz Wallet</span></p><p class="c3 c18 c8 title"><a name="h.2qls5apz7bsm"></a><span>Data Model</span></p><h1 class="c3 c8"><a name="h.8u1c8119l06p"></a><span>File Structure</span></h1><p class="c3"><span class="c0">/Accounts</span></p><p class="c20 c3"><span class="c0">/Info.json &lt;- various information like obelisk servers</span></p><p class="c3 c20"><span class="c0">/Questions.json &lt;- recovery questions choices</span></p><p class="c20 c3"><span class="c0">/Account_1</span></p><p class="c3 c5 c7"><span class="c0">/UserName.json</span></p><p class="c3 c5 c7"><span class="c0">/CarePackage.json</span></p><p class="c3 c5 c7"><span class="c0">/LoginPackage.json</span></p><p class="c3 c5 c7"><span class="c0">/sync &lt;- All data in this directory encrypted with MK</span></p><p class="c10 c3"><span class="c0">/.git</span></p><p class="c10 c3"><span class="c0">/Settings.json</span></p><p class="c10 c3"><span class="c0">/Categories.json</span></p><p class="c10 c3"><span class="c0">/Wallets</span></p><p class="c3 c11"><span class="c0">/&lt;Wallet_UUID1&gt;.json</span></p><p class="c3 c7"><span class="c0">/Account_2</span></p><p class="c3 c5 c7"><span class="c0">/UserName.json</span></p><p class="c3 c5 c7"><span class="c0">/CarePackage.json</span></p><p class="c3 c5 c7"><span class="c0">/LoginPackage.json</span></p><p class="c3 c5 c7"><span class="c0">/sync &lt;- All data in this directory encrypted with MK</span></p><p class="c3 c10"><span class="c0">/.git</span></p><p class="c10 c3"><span class="c0">/Settings.json</span></p><p class="c10 c3"><span class="c0">/Categories.json</span></p><p class="c10 c3"><span class="c0">/Wallets</span></p><p class="c3 c7 c6"><span class="c0">/&lt;Wallet_UUID2&gt;.json</span></p><p class="c3 c7 c6"><span class="c0">/&lt;Wallet_UUID3&gt;.json</span></p><p class="c3"><span class="c0">/Wallets</span></p><p class="c3 c7"><span class="c0">/</span><span class="c0">&lt;Wallet_UUID1&gt; </span><span class="c0">&nbsp;&lt;- All data in this directory encrypted with MK_&lt;Wallet_UUID1&gt;</span></p><p class="c3 c5 c7"><span class="c0">/sync</span></p><p class="c2 c7"><span class="c0">/.git</span></p><p class="c3 c6"><span class="c0">/WalletName.json</span></p><p class="c3 c6"><span class="c0">/Currency.json</span></p><p class="c3 c6"><span class="c0">/Attributes.json</span></p><p class="c3 c6"><span class="c0">/Accounts.json &lt;- account names that have this wallet</span></p><p class="c3 c6"><span class="c0">/Transactions</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-int.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-ext.json</span></p><p class="c3 c6"><span class="c0">/Addresses</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/0-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/1-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3 c5"><span class="c0">/&lt;Wallet_UUID2&gt; &nbsp;&lt;- All data in this directory encrypted with MK_&lt;Wallet_UUID2&gt;</span></p><p class="c2"><span class="c0">/sync</span></p><p class="c3 c6"><span class="c0">/.git</span></p><p class="c3 c6"><span class="c0">/WalletName.json</span></p><p class="c3 c6"><span class="c0">/Currency.json</span></p><p class="c3 c6"><span class="c0">/Attributes.json</span></p><p class="c3 c6"><span class="c0">/Accounts.json &lt;- account names that have this wallet</span></p><p class="c3 c6"><span class="c0">/Transactions</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-ext.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-ext.json</span></p><p class="c3 c6"><span class="c0">/Addresses</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/0-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/1-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/watcher-cache</span></p><p class="c3 c5"><span class="c0">/&lt;Wallet_UUID3&gt; &nbsp;&lt;- All data in this directory encrypted with MK_&lt;Wallet_UUID3&gt;</span></p><p class="c2"><span class="c0">/sync</span></p><p class="c3 c6"><span class="c0">/.git</span></p><p class="c3 c6"><span class="c0">/WalletName.json</span></p><p class="c3 c6"><span class="c0">/Currency.json</span></p><p class="c3 c6"><span class="c0">/Attributes.json</span></p><p class="c3 c6"><span class="c0">/Accounts.json &lt;- account names that have this wallet</span></p><p class="c3 c6"><span class="c0">/Transactions</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-int.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&lt;base58(hmac256(ntxid,mk)&gt;-int.json</span></p><p class="c3 c6"><span class="c0">/Addresses</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/0-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3 c6"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/1-&lt;base58(hmac256(pubkey,mk)&gt;.json</span></p><p class="c3"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/watcher-cache</span></p><h1 class="c3 c8"><a name="h.j2nxhiypniof"></a><span>Storage Overview</span></h1><p class="c3"><span>Account General Data Local - Persisted in Non-Repository Data</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recovery Question Choices</span></p><p class="c1"><span></span></p><p class="c3"><span>Account Specific Data Local - Persisted in Non-Repository Data</span></p><p class="c3 c5"><span>User Name</span></p><p class="c3 c5"><span>Care Package (ERQ, SNRP2, SNRP3, &nbsp;and SNRP4)</span></p><p class="c3 c5"><span>Login Package (EMK, ERepoAcctKey, ELP2, ELRA3)</span></p><p class="c1 c5"><span></span></p><p class="c3"><span>Account Specific Data - Persisted in a Repository</span></p><p class="c3 c5"><span>Categories</span></p><p class="c3 c5"><span>Settings</span></p><p class="c3 c5"><span>Wallets associated with this account, including decryption key, sync key, Bitcoin master seed</span></p><p class="c1"><span></span></p><p class="c3"><span>Wallet Specific Data - Persisted in a Repository for any Account</span></p><p class="c3 c5"><span>Wallet Name</span></p><p class="c3 c5"><span>Currency (e.g., dollar, yen, etc)</span></p><p class="c3 c5"><span>Transactions</span></p><p class="c3 c5"><span>Bitcoin addresses (including metadata including purpose, date, etc.)</span></p><p class="c1 c5"><span></span></p><p class="c3"><span>Wallet Specific Data Local - Persisted in Non-Repository Data</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Blockchain watcher cache</span></p><h1 class="c3 c8 c30"><a name="h.yqynh7cokbmi"></a><span>General Concepts</span></h1><p class="c9 c3"><span>Every repository has both a sync key, which is used to authenticate with the Git server, and a master key, which is used to decrypt the contents. Every file in the repo is stored encrypted using this key.</span></p><p class="c1 c9"><span></span></p><p class="c3 c9"><span>The core stores cached data outside the sync repos. For the account, the core caches the Care Package and Login Package. These can be obtained from the login servers at any time, and should be frequently refreshed in case the user has changed their username or recovery questions. Keeping these files cached locally allows a login to take place without internet connectivity.</span></p><p class="c1 c9"><span></span></p><p class="c9 c3"><span>For the wallets, the core caches the blockchain state of all relevant transactions. This data can be refreshed at any time from the Bitcoin network, but the cache allows faster startup times.</span></p><p class="c1 c5"><span></span></p><p class="c3"><span>For portability and readability, where possible, all data to be stored in JSON and Base64 or Hex as specified for binary data.</span></p><h1 class="c3 c8"><a name="h.mbp3kfowxy3d"></a><span>Encryption Formats</span></h1><h2 class="c3 c8"><a name="h.9ntot8lyoa3r"></a><span>General Encryption Format</span></h2><p class="c3 c7"><span>Additional fields can be added as required by the encryption</span></p><p class="c3 c7"><span>Encryption types:</span></p><p class="c3 c7"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 = AES256-CBC</span></p><h2 class="c3 c8"><a name="h.ka9o83wuhycr"></a><span>AES256-CBC Encrypted Data</span></h2><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;iv_hex&quot;: &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c3 c5 c7"><span>with scrypt:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;encryptionType&quot;: 1,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;salt_hex&quot;: &quot;5a7d874s8d7fe89ef0de37aa6ff890bc&quot;,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;p&quot;: 1,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c3 c5 c7"><span>Notes: iv is in hex format and data is in base64</span></p><p class="c3 c7"><span>Format of decrypted data:</span></p><p class="c2"><span>1 byte: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h (the number of random header bytes)</span></p><p class="c2"><span>h bytes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h random header bytes</span></p><p class="c2"><span>4 bytes: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;length of data (big endian)</span></p><p class="c2"><span>x bytes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data (x bytes)</span></p><p class="c3 c5 c7"><span>1 byte: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f (the number of random footer bytes)</span></p><p class="c3 c5 c7"><span>f bytes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f random header bytes</span></p><p class="c3 c5 c7"><span>32 bytes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;32 bytes SHA256 of all data up to this point</span></p><p class="c3 c5 c7"><span>Total bytes: h + f + x + 38</span></p><p class="c3 c7"><span>Example of decrypted data:</span></p><p class="c3 c7"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unencrypted data: </span><span class="c15">7a</span></p><p class="c3 c7"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of random header bytes: </span><span class="c21">02</span><span>&nbsp;(</span><span class="c27">a5bc</span><span>)</span></p><p class="c3 c5 c7"><span>Number of random footer bytes: </span><span class="c21">03</span><span>&nbsp;(</span><span class="c27">bc0a10</span><span>)</span></p><p class="c3 c7"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length </span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SHA256:</span></p><p class="c3 c5 c7"><span>&nbsp; </span><span class="c28">594e519ae499312b29433b7dd8a97ff068defcba9755b6d5d00e84c524d67b06</span></p><p class="c3 c5 c7"><span>Total length: 44</span></p><p class="c3 c5 c7"><span>Final form:</span></p><p class="c2 c7"><span class="c21 c25">02 </span><span class="c17">a5 bc </span><span class="c19">00 00 00 01</span><span class="c17">&nbsp;</span><span class="c15 c25">7a </span><span class="c21 c25">03</span><span class="c23">&nbsp;</span><span class="c17">bc 0a 10 </span><span class="c23">59 4e 51 9a </span></p><p class="c2 c7"><span class="c23">e4 99 31 2b 29 43 3b 7d d8 a9 7f f0 68 de fc ba </span></p><p class="c2 c7"><span class="c23">97 55 b6 d5 d0 0e 84 c5 24 d6 7b 06 </span></p><p class="c3 c5"><span>Overhead min: 38 bytes</span></p><p class="c3 c5"><span>Overhead max: 548 bytes</span></p><h2 class="c3 c8"><a name="h.2ii3jat0dpll"></a><span>SNRP</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This holds the Salt, N, r and p used in a given scrypt password derivation.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;salt_hex&quot;: &quot;6278b2958b41b3bd9b63182de5927fd0fe6f73b95b2a7cdbd9b47af15b5d805f&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;p&quot;: 1</span></p><p class="c2"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.agknk6di1o65"></a><span>Data Used but not stored on the client directly</span></h1><p class="c3"><span>RecoveryQ (RQ)</span></p><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>List of recovery questions selected by the user for password recovery.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">&quot;What was your childhood nickname?\nIn what city or town was your first job?\nWhat is the name of your favorite childhood friend?\nWhat street did you live on in third grade?\n&quot;In what city does your nearest sibling live?&quot;</span></p><p class="c1 c5 c7"><span class="c0"></span></p><p class="c3"><span>L1</span></p><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This holds the Username of an account Scrypt&rsquo;ed using SNRP1 (Salt, N, r and p agreed upon between the client code and server code).</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;L1&quot;: &quot;8e7cadb64d762beedb05f312bd81438dc6a793cab01cc148a26692f7d609b052&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c1"><span></span></p><p class="c3"><span>L</span><span>P1</span></p><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This holds the Password of an account Scrypt&rsquo;ed using SNRP1 (Salt, N, r and p agreed upon between the client code and server code).</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;LP1&quot;: &quot;b2b20c0df94c6ce928abd3721826771a0a08bd911ac0419eb04218a9445677f0&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c1"><span></span></p><p class="c3"><span>LRA1</span></p><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This holds the Username concatenated with the Recover Answers of an account Scrypt&rsquo;ed using SNRP1 (Salt, N, r and p agreed upon between the client code and server code).</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;LRA1&quot;: &quot;f60efccccfe6007277c2eb9a08a154600094e1b15a28cb0497545d6c29ab299e&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><p class="c1"><span></span></p><p class="c3"><span>Wallet ID (&lt;Wallet_UUID&gt;)</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description</span></p><p class="c2"><span>This UUID should be unique across all users and all accounts to facilitate the ability to share wallets between accounts.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">AF00D7B7-85D0-498D-AABD-F607849CEBF1</span></p><h1 class="c3 c8"><a name="h.bbgjntm1dcf1"></a><span>Account General Data Local - Persisted in Non-Repository Data</span></h1><h2 class="c3 c8"><a name="h.uy6wr41574kx"></a><span>Info</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>Contains information provided by the AirBitz server include Obelisk Servers, AirBitz fees and miners fees.</span></p><p class="c3 c5"><span>Format with Sample Data</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;minersFees&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;feeSatoshi&quot;: 10000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;txSizeBytes&quot;: 300</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;feeSatoshi&quot;: 10000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;txSizeBytes&quot;: 1000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;feeSatoshi&quot;: 20000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;txSizeBytes&quot;: 2000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ],</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;feesAirBitz&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;percentage&quot;: 5,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;maxSatoshi&quot;: 1000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;minSatoshi&quot;: 500,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;address&quot;: &quot;1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;obeliskServers&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;tcp://obelisk1.airbitz.co&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;tcp://obelisk2.airbitz.co&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;tcp://obelisk3.airbitz.co&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.vv43m81qj2g"></a><span>Recovery Question Choices</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>These are the questions the user can choose from for recovery.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;questions&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;integer&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;min_length&quot;: 4,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;question&quot;: &quot;What year were you born?&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;string&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;min_length&quot;: 4,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;question&quot;: &quot;What is your favorite book?&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;string&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;min_length&quot;: 4,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;question&quot;: &quot;What is the name of your first pet?&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.tpi63av9t1y"></a><span>Account-Specific Cache Data</span></h1><p class="c9 c3"><span>This data is stored outside the sync directory.</span></p><h2 class="c3 c8"><a name="h.cf5q0jevphj"></a><span>User Name</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>The username entered by the user when they first created the account.</span></p><p class="c2"><span>Used to help facilitate login</span></p><p class="c2"><span>Stored in Non-Repository folder </span></p><p class="c2"><span>Stored without encryption (?)</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data:</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;userName&quot;: &quot;Paul007&quot;</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.9auo8empx0rl"></a><span>Care Package</span></h2><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description:</span></p><p class="c2"><span>The concept behind this package is that the server can give this to the client when the client has forgotten their password. It starts the process off by providing the recovery questions (encrypted) and the sets of Salt,N,r,p used for the scrypt calls on different key encryptions.</span></p><p class="c2"><span>It is possible for the CarePackage not to contain the ERQ field. In this case, the user has not set recovery questions.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;ERQ&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &quot;75243b7137a184d5709373744a5f730f&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;YpxiYY3MQk4bJBYhfXFXHJZYmz0b7d37McKRB7Ae5iR8Obvp2Ivf0UtOC0vT1M3JDUldGB+qGXOLOtmkrvSeVzctLI+CTG3/HJIAVNg8+cbVSC/+WzMHLD9VCcJyrT9HsN8UyLvDgEM0KSHTZv2naDkr2ywaF/aKeH/sOK03fqaLDqiEOkc2AyiY+/XOQJgoSBhO6VgAswEqAenTg85hQSdxCIGPtx/a1RQHznUMvRabnGnEPNPqI9ZJ5lGLDBXugAD5IqEncxtlO4WbQ1q0+Q==&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;SNRP2&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;salt_hex&quot;: &quot;15b7121891f6fd7e184a1f289e2a3eac02e0284c3950a33f7d20435606c6768e&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;p&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;SNRP3&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;salt_hex&quot;: &quot;c1c6688f396502afa7c188322baee72cf3e31e15197e5e13d9ac76cbef393dd1&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;p&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;SNRP4&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;salt_hex&quot;: &quot;64571b77ffaa307a650f5d060169b87772da6152257a8452b42813a4aa2d134e&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;n&quot;: 16384,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;r&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;p&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.kpi2bwtahvh"></a><span>Login Package</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This file contains all the information needed to access the account-specific sync directory, given either a password or a set of recovery answers. The ELP2 and ELRA3 fields are not present if the user has not set recovery questions.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c12"><span class="c0">{</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &quot;MK&quot;: {</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &quot;SyncKey&quot;: {</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &quot;ELP2&quot;: {</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &quot;ELRA3&quot;: {</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;encryptionType&quot;: 0,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;iv_hex&quot;: &nbsp; &quot;c88dc3d194ff6aa792cc06b66273426f&quot;,</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;data_base64&quot;: &quot;WI9a6fRvLVapzCjUWYoLlA==&quot;</span></p><p class="c3 c12"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c3 c12"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.8ts3sk8feeuo"></a><span>Account-Specific Sync Data</span></h1><p class="c9 c3"><span>All data in the sync repo is stored encrypted using the account MK. The unencrypted data is shown here.</span></p><h2 class="c3 c8"><a name="h.2q0emu11dtne"></a><span>Settings</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>User settings for the account.</span></p><p class="c3 c5"><span>Format</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;firstName&quot;: &quot;Paul&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;lastName&quot;: &quot;Puey&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;nickname&quot;: &quot;DoubleP&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;nameOnPayments&quot;: true,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;minutesAutoLogout&quot;: 60,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;language&quot;: &quot;en&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;numCurrency&quot;: 840,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;exchangeRateSources&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;numCurrency&quot;: 840,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;exchangeRateSource&quot;: &quot;bitstamp&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;numCurrency&quot;: 124,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;exchangeRateSource&quot;: &quot;cavirtex&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ],</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;bitcoinDenomination&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;denominationType&quot;: 1,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;satoshi&quot;: 100000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;advancedFeatures&quot;: true</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.vsbl5jldoqfc"></a><span>PIN</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This should logically go in the settings</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;PIN&quot;: &quot;12345&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.uj8u4h7w8bu1"></a><span>Categories</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>Categories strings attached to transactions by user.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;categories&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;Products&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;Food&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;Gas&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.h17jt5djxagk"></a><span>Wallets</span></h2><p class="c3 c5"><span>Description</span></p><p class="c3 c12"><span>One file for each wallet associated with this account.</span></p><p class="c3"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data</span></p><p class="c3 c12"><span>The SyncKey is used to access the sync repo.</span></p><p class="c3 c12"><span>The MK is used to decrypt the contents of the wallet sync repo.</span></p><p class="c3 c12"><span>The BPS is the BIP-32 private seed (raw entropy) needed to access funds in the wallet. This is not present for read-only wallets. Multi-sig or other types of wallets may do something different for this field in the future.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;MK&quot;: &quot;a8f0b97515e62e0365e0bb21b9a7441ad7dfd0fb6212e736455f2b40612895e4&quot;,</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;BPS&quot;: &quot;cd9605fe6c5b30a601147f2bfeffb98f89a020ff15bf62a784d6fa6b63f24fe7&quot;,</span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;SyncKey&quot;: &quot;e2282926a75a8bafb4677728749f4d2a&quot;</span></p><p class="c2"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.2olse1dkf8to"></a><span>Wallet-Specific Sync Data</span></h1><p class="c3"><span>All data in the sync repo is stored encrypted using the wallet MK. The unencrypted data is shown here.</span></p><h2 class="c3 c8"><a name="h.xtde0t6bg4oi"></a><span>Wallet Name</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>This is the name the users uses to refer to the wallet. It is assigned when the user creates the wallet.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c3 c5 c7"><span class="c0">{</span></p><p class="c3 c5 c7"><span class="c0">&nbsp; &nbsp; &quot;walletName&quot;: &quot;Savings&quot;</span></p><p class="c3 c5 c7"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.cl9c9o9uiadr"></a><span>Currency</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>The currency type to be used in a given wallet. The value is a ISO 4217 number.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;num&quot;: 840</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.ks1m1hex6vcx"></a><span>Attributes</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>This is used to store flags representing the attributes of a wallet. For example, an archived bit can be set to represent that the wallet is archived.</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;attributes&quot;: 1</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.rwubh58c77lt"></a><span>Accounts</span></h2><p class="c3 c5"><span>Description</span></p><p class="c2"><span>List of all the accounts that have this wallet</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;accounts&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;John Smith&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.5qjq36eqas6v"></a><span>Transaction</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This data represents a transaction made with Bitcoin (payment or receipt of payment) in a given wallet.</span></p><p class="c2"><span>Note: </span></p><p class="c3 c6"><span>The name of the file is the ntxid in hex followed by a </span><span class="c14">-int </span><span>or </span><span class="c14">-ext</span><span>.</span></p><p class="c3 c6"><span>Example: </span><span class="c0">2ba1345764a1a704b97d062b47b55c8632efc4d7c0c8039d78adf8a52bcba4fe-int.json</span></p><p class="c3 c6"><span>-int represents a transaction that was created as part of a send</span></p><p class="c3 c6"><span>-ext represents a transaction that was created due to information coming from the block chain (usually a receive)</span></p><p class="c3 c5"><span>Data</span></p><p class="c2"><span>Transaction ID from Bitcoin</span></p><p class="c2"><span>Meta Data</span></p><p class="c3 c6"><span>Amount in Satoshi for which the address was created</span></p><p class="c3 c6"><span>Amount in user currency for which the address was created</span></p><p class="c3 c6"><span>Name associated with this address</span></p><p class="c3 c6"><span>Directory business ID associated with this transaction</span></p><p class="c3 c6"><span>Category associated with this address</span></p><p class="c3 c6"><span>Notes associated with this address</span></p><p class="c3 c6"><span>Attributes associated with this address</span></p><p class="c2"><span>State Data</span></p><p class="c3 c6"><span>Creation date (seconds since epoch)</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;ntxid&quot;: &quot;2ba1345764a1a704b97d062b47b55c8632efc4d7c0c8039d78adf8a52bcba4fe&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;meta&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountSatoshi&quot;: 130000000,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountFeeAirBitzSatoshi&quot;: 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountFeeMinersSatoshi&quot;: 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountCurrency&quot;: 739.34,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;John Smith&rsquo;s Auto&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;bizId&quot;: 42,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;Auto&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;notes&quot;: &quot;Tires&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;attributes&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;state&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;creationDate&quot;: 1394058599,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;internal&quot;: true</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;addresses&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L&quot;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">}</span></p><h2 class="c3 c8"><a name="h.wuxjronibqkd"></a><span>Address</span></h2><p class="c3 c5"><span>Description:</span></p><p class="c2"><span>This data represents a Bitcoin address that was created for use in a transaction.</span></p><p class="c3 c5"><span>Data</span></p><p class="c2"><span>Sequence number used to generate the Bitcoin address</span></p><p class="c2"><span>Public sided of the Bitcoin key-pair</span></p><p class="c2"><span>Meta Data</span></p><p class="c3 c6"><span>Amount in Satoshi for which the address was created</span></p><p class="c3 c6"><span>Amount in user currency for which the address was created</span></p><p class="c3 c6"><span>Name associated with this address</span></p><p class="c3 c6"><span>Directory business ID associated with this address</span></p><p class="c3 c6"><span>Category associated with this address</span></p><p class="c3 c6"><span>Notes associated with this address</span></p><p class="c3 c6"><span>Attributes associated with this address</span></p><p class="c2"><span>State Data</span></p><p class="c3 c6"><span>Recycleable bit</span></p><p class="c3 c6"><span>Creation date (seconds since epoch)</span></p><p class="c3 c6"><span>Activity</span></p><p class="c3 c6"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(array of transaction events)</span></p><p class="c3 c5"><span>Format with Sample Data:</span></p><p class="c2"><span class="c0">{</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;seq&quot;: 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;address&quot;: &quot;1NS17iag9jJgTHD1VXjvLCEnZuQ3rJED9L&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;meta&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountSatoshi&quot;: 130000000,</span></p><p class="c3 c6"><span class="c0">&nbsp;&quot;amountFeeAirBitzSatoshi&quot; : 0,</span></p><p class="c2 c7"><span class="c0">&nbsp;&quot;amountFeeMinersSatoshi&quot; : 0,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;amountCurrency&quot;: 739.34,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;John Smith&rsquo;s Auto&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;bizId&quot;: 42,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;category&quot;: &quot;Auto&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;notes&quot;: &quot;Tires&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;attributes&quot;: 1</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &quot;state&quot;: {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;recycleable&quot;: false,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;creationDate&quot;: 1394058599,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &quot;activity&quot;: [</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ntxid&quot;: &quot;2ba1345764a1a704b97d062b47b55c8632efc4d7c0c8039d78adf8a52bcba4fe&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;date&quot;: 1394058599,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;amountSatoshi&quot;: 10000000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; },</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;ntxid&quot;: &quot;2ba1345764a1a704b97d062b47b55c8632efc4d7c0c8039d78adf8a52bcba4fe&quot;,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;date&quot;: 1394058599,</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;amountSatoshi&quot;: 3000000</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; ]</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c2"><span class="c0">}</span></p><h1 class="c3 c8"><a name="h.dmjxat6e9f27"></a><span>Wallet-Specific Cache Data</span></h1><h2 class="c9 c3 c8"><a name="h.nk8g3ad7kh9"></a><span>Watcher Cache</span></h2><p class="c3 c4"><span>The wallet watcher service (a future part of libbitcoin) is responsible for monitoring a set of addresses on the Blockchain and maintaining a local copy of all transactions related to those addresses. This service can persist it state to disk, avoiding a full Blockchain re-scan on each startup. The format of this data is determined by libbitcoin.</span></p></body></html>'
    html = clean_gdoc_html(gdoc_html, images=False)
    context = {
        'page_title': 'Bitcoin Wallet Server API',
        'page_description': 'The Airbitz Core (ABC) gives developers the ability to build Bitcoin products such as currency exchanges, ATMs, POS solutions, games, and payroll services that are fully integrated with accounts and wallets from the Airbitz mobile app.',
        'gdoc_style': html['style'],
        'gdoc_body': html['body'],
    }
    return render_to_response('pages/page_bitcoin-wallet-server-api.html', RequestContext(request, context))
